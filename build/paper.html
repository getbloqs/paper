<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Stefan Huber">
<title>bloqs.at</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="book">
<div id="header">
<h1>bloqs.at</h1>
<div class="details">
<span id="author" class="author">Stefan Huber</span><br>
<span id="email" class="email"><a href="mailto:mail@stefanhuber.at">mail@stefanhuber.at</a></span><br>
<span id="revnumber">version 1.0.0</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Inhalt</div>
<ul class="sectlevel1">
<li><a href="#_Übersicht">Übersicht</a></li>
<li><a href="#_blockchain_technologie">Blockchain-Technologie</a>
<ul class="sectlevel2">
<li><a href="#_bitcoin">Bitcoin</a></li>
<li><a href="#_ethereum">Ethereum</a></li>
<li><a href="#_blockchain_anwendungen">Blockchain Anwendungen</a></li>
<li><a href="#_blockchain_anwendungsarchitektur">Blockchain Anwendungsarchitektur</a></li>
</ul>
</li>
<li><a href="#_szenario_1">Szenario 1</a>
<ul class="sectlevel2">
<li><a href="#section0101">Problemstellung: Online Sportwetten</a></li>
<li><a href="#section0102">Smart Contracts</a></li>
<li><a href="#section0103">Implementierung mit Solidity</a></li>
<li><a href="#section0104">Web-Anwendung</a></li>
<li><a href="#section0105">Diskussion</a></li>
</ul>
</li>
<li><a href="#_szenario_2">Szenario 2</a>
<ul class="sectlevel2">
<li><a href="#section0201">Problemstellung: Domain Name System</a></li>
<li><a href="#section0202">Demonstration einer Subdomain Registry</a></li>
<li><a href="#section0203">Smart Contract</a></li>
<li><a href="#section0204">Server Anwendung</a></li>
<li><a href="#section0205">Web-Anwendung</a></li>
<li><a href="#section0206">Diskussion</a></li>
</ul>
</li>
<li><a href="#_szenario_3">Szenario 3</a>
<ul class="sectlevel2">
<li><a href="#section0301">Problemstellung: Initial Coin Offerings</a></li>
<li><a href="#section0302">ERC-20 Token Standard</a></li>
<li><a href="#section0303">Crowdsale Contracts</a></li>
<li><a href="#section0304">Implementierung des Demo ICO</a></li>
<li><a href="#section0307">Diskussion</a></li>
</ul>
</li>
<li><a href="#_ethereum_entwicklungsumgebung">Anhang A: Ethereum Entwicklungsumgebung</a>
<ul class="sectlevel2">
<li><a href="#_ethereum_client">Ethereum Client</a></li>
<li><a href="#_ethereum_dapp_browser">Ethereum DApp Browser</a></li>
<li><a href="#_truffle">Truffle</a></li>
<li><a href="#_metamask">MetaMask</a></li>
<li><a href="#_ganache">Ganache</a></li>
</ul>
</li>
<li><a href="#_referenzen">Referenzen</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_Übersicht">Übersicht</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Innerhalb dieses Dokumentes werden 3 Szenarien vorgestellt, welche exemplarisch als DApps (Distributed Apps) realisiert wurden. Alle DApps wurden speziell für das Ethereum Netzwerk entwickelt und enthalten jeweils entsprechende Smart Contracts, welche die Geschäftslogik enthalten, sowie eine Benutzerschnittstelle zur Interaktion mit den Smart Contracts.</p>
</div>
<div class="paragraph">
<p>Folgende 3 Szenarien wurden entwickelt und werden im Dokument beschrieben:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Szenario 1: Abbildung einer Sportwette</p>
</li>
<li>
<p>Szenario 2: Dezentrale Domainregistrierung</p>
</li>
<li>
<p>Szenario 3: Initial Coin Offerings</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alle Software Artefakte und Entwicklerdokumentationen sind unter BSD 2-Clause Lizenz veröffentlicht. Dieses Dokument ist unter der CC BY-SA 4.0 Lizenz veröffentlicht. Alle Quelltexte zum Projekt findet man auf github.com. Im folgenden sind alle Links zu den einzelnen Repositories aufgelistet:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Szenario 1: <a href="https://github.com/getbloqs/scenario01" class="bare">https://github.com/getbloqs/scenario01</a></p>
</li>
<li>
<p>Szenario 1: <a href="https://github.com/getbloqs/scenario02" class="bare">https://github.com/getbloqs/scenario02</a></p>
</li>
<li>
<p>Szenario 1: <a href="https://github.com/getbloqs/scenario03" class="bare">https://github.com/getbloqs/scenario03</a></p>
</li>
<li>
<p>Dokumentation: <a href="https://github.com/getbloqs/paper" class="bare">https://github.com/getbloqs/paper</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Das Projekt wurde als Teil der "netidee Projektförderung" im Call 2016 realisiert.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_blockchain_technologie">Blockchain-Technologie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bitcoin">Bitcoin</h3>
<div class="paragraph">
<p>Im Jahr 2008 wurde von unbekannten Autoren mit dem Pseudonym <em>Satoshi Nakamoto</em> eine Publikation mit dem Titel "Bitcoin: A Peer-to-Peer Electronic Cash System"<a href="#Bit2008">[Bit2008]</a> innerhalb einer Mailingliste <a href="#Mai2008">[Mai2008]</a> veröffentlicht. Die Publikation beschreibt auf 9 Seiten konzeptionell ein Transfersystem von virtuellen Tokens (Bitcoins), welche über das Internet ausgetauscht werden können. Neben dieser konzeptionellen Beschreibung lieferte Satoshi Nakamoto auch eine Open Source Implementierung von Bitcoin.</p>
</div>
<div class="paragraph">
<p>Bitcoin ist als verteiltes Peer-to-Peer Netzwerk organisiert, welches keinen zentralen Dienst erfordert. Somit kann jeder Internetnutzer die Bitcoin Software installieren und Teil des Netzwerks werden. Das Herzstück von Bitcoin stellt eine verteilte Datenstruktur dar (Blockchain), welche eine Liste mit allen Transaktionen zwischen den Netzwerkteilnehmern enthält. Veränderungen in dieser Datenstruktur können nur über einen Prozess der sich Mining nennt durchgeführt werden. Als Belohnung für ihre Arbeit bekommen Mining-Knoten Bitcoin-Token ausgeschüttet. Dies ermöglicht es neue Bitcoins im System zu erschaffen.</p>
</div>
<div class="paragraph">
<p>Zusammengefasst besteht Bitcoin aus 4 Bestandteilen bzw. Schlüsselinnovationen, welche in Kombination Bitcoin ausmachen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ein dezentrales Peer-to-Peer Netzwerk: Das Bitcoin Protokoll</p>
</li>
<li>
<p>Ein öffentliches Transaktionsbuch: Die Bitcoin Blockchain</p>
</li>
<li>
<p>Ein Bündel an Regeln für die Transaktionsverifizierung und Tokenausgabe: Die Konsensus Regeln</p>
</li>
<li>
<p>Ein Mechanismus zur dezentralen Konsenermittlung über den Status der Blockchain: Proof-of-Work Algorithmus</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_bitcoin_adressen">Bitcoin Adressen</h4>
<div class="paragraph">
<p>Das Eigentum von Bitcoins wird über digitale Signaturen sichergestellt. Dabei fungieren Bitcoin Adressen als öffentlich austauschbare Schlüssel, welche weitergegeben werden können um eingehende Bitcoin Transaktion zu erhalten. Zu jeder Bitcoin Adresse gehört ein privater Schlüssel. Dieser Schlüssel kann vom Eigentümer der Bitcoin Adresse verwendet werden um Transaktionen zu signieren und damit die Zustimmung zu geben, dass von der zugehörigen Bitcoin Adresse eine Abbuchung vorgenommen werden darf. Jeder Netzwerkteilnehmer kann sich beliebig viele Bitcoin Adressen dezentral generieren. Aus Gründen der Anonymität sollte für jede Bitcoin Transaktion eine eigene Adresse generiert werden.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bitcoin_transaktionen">Bitcoin Transaktionen</h4>
<div class="paragraph">
<p>Transaktionen stellen den wichtigsten Teil innerhalb des Bitcoin Netzwerks dar. Alle anderen Bestandteile des Bitcoin Sytems ermöglichen den Austausch von Transaktionen zwischen den einzelnen Netzwerkteilnehmern. Jede valide Transaktion wird von Mining-Knoten über die Propagation eines Blockes in die Blockchain aufgenommen. Diese Aufnahme in die Blockchain führt zu einer Veränderung der Beträge hinter den Bitcoin Adressen und ermöglicht somit die Werttransfers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bitcoin_mining">Bitcoin Mining</h4>
<div class="paragraph">
<p>Der Prozess zur Generierung eines neuen gültigen Blocks und damit die Veränderung der Blockchain wird Mining gennant. Mining passiert auf einem Proof-of-Work Verfahren. Dieses Verfahren verhindert, dass ungültige Transaktionen in die Blockchain integriert werden können. Die Bitcoin Blockchain wird dadurch zu einer Datenbank, welche öffentlich lesbar ist jedoch nur unter bestimmten Bedingungen beschreibbar wird.</p>
</div>
<div class="paragraph">
<p>Im folgenden soll zur Übersicht der Prozess der Integration einer Transaktion in die Blockchain beschrieben werden:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eine neue Bitcoin Transaktion wird von einem Bitcoin Nutzer erstellt und an das Netzwerk übergeben. Bitcoin Knoten versenden die Transaktion (Gossip Protokoll) an alle weiter Knoten. Die Transaktion wird somit sehr rasch allen Knoten im Netzwerk bekannt.</p>
</li>
<li>
<p>Es sind einige spezielle Mining-Knoten im Netzwerk, welche alle neuen Transaktionen im sog. Mempool sammeln. Für einen potenziellen neuen Block werden Transaktionen zu einem Merkle-Baum zusammengefasst. Die Wurzel des Merkle-Baums bilded neben anderen Parametern den Block-Header.</p>
</li>
<li>
<p>Der Block-Header ist der wesentliche Eingabeparameter für den Proof-of-Work Algorithmus. Dieser sucht durch Hashing des Block-Header und einer veränderlichen Nonce (Number used only once) eine passende Lösung anhand der Schwierigkeitsvorgabe. Eine gefunde Lösung wird an das Bitcoin Netzwerk gesendet und dort wieder verteilt.</p>
</li>
<li>
<p>Um eine Belohnung für die aufgewendete Arbeitsleitung des Miners zu lukrieren, wird eine sog. Coinbase Transaktion in den Block eingefügt. Diese Coinbase Transaktion hat keinen Input aber einen Output mit der Adresse den Miners. Dieser Prozess ist für Schöpfung neuer Bitcoins verantwortlich. Alle 210.000 Blöcke wird die Belohnung halbiert, gestartet wurde bei 50 Bitcoins pro Block.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Der Schwierigkeitsgrad des Proof-of-Work Mining ist variabel und passt sich an die verfügbare Rechenleistung im globalen Bitcoin Netzwerk an. Das Ziel ist das alle 10 Minuten ein neuer Block im Netzwerk entsteht. Alle 2016 Blöcke wird deshalb ein Durchschnittswert über die letzten gefundenen Blöcke berechnet. Falls dieser höher als 10 Minuten ist, wird der Schwierigkeitsgrad minimiert, falls dieser niedriger ist wird dieser erhöht.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ethereum">Ethereum</h3>
<div class="paragraph">
<p>Ethereum ist als verteiltes Rechennetzwerk konzipiert, sodass jegliches Programm (Turing-Completness) innerhalb einer eigenen isolierten Ablaufumgebung (Ethereum Virtual Machine) deterministisch und reproduzierbar ausgeführt werden kann.</p>
</div>
<div class="paragraph">
<p>Das Ethereum Protokoll ist in ständiger Weiterentwicklung. Es wurden jedoch Design Prinzipien <a href="#Eth2017">[Eth2017]</a> festgelegt, welche die zukünftige Weiterentwicklung leiten. Im folgenden werden diese Prinzipien dargelegt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Einfachheit</strong>: Das grundlegende Protokoll soll so einfach wie möglich sein, sodass ein Programmierer in der Lage sein soll die Spezifikation gänzlich zu verstehen und nötigenfalls zu implementieren. Komplexität durch Optimierungen soll nicht vermieden werden sonder in eine Mittelschicht zwischen Basisprotokoll und Anwendung platziert werden.</p>
</li>
<li>
<p><strong>Freiheiten</strong>: In Analogie zum Konzept der <em>Net Neutrality</em> soll auch im Ethereum Protokoll keinerlei Bevorzugung oder Benachteiligung von bestimmten Transaktionen oder Contracts geschehen können.</p>
</li>
<li>
<p><strong>Generalisierung</strong>: Die Konzepte im Ethereum Protokoll sollen auf dem niedrigsten Level dargestellt werden, um sie dadurch beliebig miteinander kombinierbar zu machen.</p>
</li>
<li>
<p><strong>Ohne Features</strong>: Als folge der Generalisierung enthält das Ethereum Protokoll keinerlei Features welchen häufige Anwendenungsfälle zugrundeliegen. Jegliche Funktionen entstehen aus der Kombination bzw. Nutzung der generalisierten Konzepte.</p>
</li>
<li>
<p><strong>Risikobereitschaft</strong>: Ist ist okay ein höheres Risiko mit einer Implementierung einzugehen, wenn dies nachhaltige Vorteile bringt.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_ethereum_konto_account">Ethereum Konto (Account)</h4>
<div class="paragraph">
<p>Ethereum Konten werden über eine 20 byte Addresse identifiziert (zB 0x829BD824B016326A401d083B33D092293333A830) und können genutzt werden um die Ethereum eigene Kryptowährung Ether über Transaktionen auszutauschen. Jedes Konto hat somit einen Kontostand, welcher in Ether geführt wird. In Ethereum können prinzipiell zwei Arten von Konten unterschieden werden:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Externe Konten</strong>: Diese Konten werden von einem privaten Schlüssel kontrolliert. Über den privaten Schlüssel können Transaktionen signiert werden und somit der Kontostand verändert werden.</p>
</li>
<li>
<p><strong>Vertragskonten</strong>: Auf einem Vertragskonto findet sich der ausführbare Programmcode eines Smart Contract, welcher über Transaktionen aktiviert werden kann. Vertragskonten besitzen ebenfalls einen Speicher, welcher den Zustand des Smart Contracts repräsentiert.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ethereum_transaktionen">Ethereum Transaktionen</h4>
<div class="paragraph">
<p>Zwischen den Ethereum Konten können Nachrichten bzw. Transaktionen ausgetauscht werden. Eine Transaktion enthält primär folgende Daten:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Die Menge an Ether, welche vom Sender zum Empfänger übertragen werden soll.</p>
</li>
<li>
<p>Falls der Empfänger ein Smart Contract ist, können auch Daten übertragen werden, welche als Eingabewerte für den Programmcode gelten.</p>
</li>
<li>
<p>Ein sog. Gaspreis, welcher angibt wieviel die Transaktionsausführung maximal Kosten darf.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Neben Transaktionen zwischen bestehenden Ethereum Konten, gibt es eine spezielle Transaktion, welche zur Erstellung eines neuen Vertragskontos verwendet wird. Falls der Empfänger der Transaktion die leere Addresse ("0") ist, dann wird innerhalb des Netzwerkes ein neues Vertragskonto erstellt mit den mitgeführten Daten als Programmcode. Die Addresse des Vertragskontos wird aus der Absender Adresse abgeleitet.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ethereum_zustandsübergänge_und_codeausführung">Ethereum Zustandsübergänge und Codeausführung</h4>
<div class="paragraph">
<p>Jede Transaktion führt bei Erfolg zu einer Zustandsänderung der Blockchain und wird innerhalb einer isolierten Instanz der Ethereum Virtual Machine ausgeführt. Jeder Schritt dieser Ausführung ist mit einer definierten Menge an GAS als Kosten bepreist. Jeder Transaktion muss daher genügend Ether als GAS mitgegeben werden, sodass die Ausführung finanziert werden kann. GAS wird somit als effizientes Mittel gegen Denial-of-Service Attacken im Ethereum Netzwerk eingesetzt. Folgendes muss für eine erfolgreiche Transaktionsausführung gelten:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Die Transaktion muss wohl geformt und vom Absender korrekt signiert sein</p>
</li>
<li>
<p>Es muss genügend Ether (für GAS und den Werttransfer) am Konto des Absenders vorhanden sein</p>
</li>
<li>
<p>Es muss genügend GAS freigegeben werden um die Transaktion durchzuführen</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Falls eine Transaktion fehlschlägt, werden alle Zustandsänderungen revidiert und das gesendete Ether wieder an den Absender rückgeführt. Bei einer erfolgreichen Transaktion wird die Zustandsänderung innerhalb eines Blockes gespeichert und ist nach Validierung der Miner innerhalb der Blockchain verfügbar.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ethereum_blockchain_und_mining">Ethereum Blockchain und Mining</h4>
<div class="paragraph">
<p>Die Ethereum Blockchain ist der Bitcoin Blockchain sehr ähnlich. Jegliche Zustandsänderung eines Kontos, sei es am Kontostand oder am Speicher, muss über einen Konsens im Netzwerk geschehen. Das Ethereum Netzwerk basiert ebenfalls auf einem Verbund von vielen und weltweit verteilten Rechnern. Die Mining Knoten im Netzwerk validieren Transaktionen über den oben genannten Prozess und propagieren die Transaktion bei Erfolg innerhalb eines Blockes. Das Ethereum Netzwerk hat eine sehr schnelle Block Validierungs Zeit von ungefähr 17 Sekunden, sodass eine gültige Transaktion relativ rasch integriert wird. Für Ethereum ist geplant das energieaufwändige Proof-of-Work Verfahren gegen ein Proof-of-Stake Verfahren auszutauschen. Mining Knoten werden zu Validatoren und müssen einen Einsatz (Stake = Ether) auf einem Konto hinterlegen. Ein Validator hat Interesse daran, dass die Blockchain korrekt funktioniert, denn der Einsatz steht auf dem Spiel. Ein Fehlverhalten des Validators kann dazu führen, dass der Stake eingeforen wird.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_blockchain_anwendungen">Blockchain Anwendungen</h3>
<div class="paragraph">
<p>Die Blockchain Technologie wird nach Swan<a href="#Swa2015">[Swa2015]</a> als hoch disruptive Technologie eingestuft und in 3 Kategorien eingeteilt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Blockchain 1.0 - Währungen</strong>: Mit Bitcoin haben Blockchains ihren Ursprung genommen. Bitcoin oder ähnliche Altcoins (zB Litecoin, Dash oder Monero) sind sog. Kryptowährungen und können für Werttransfers über das Internet genutzt werden.</p>
</li>
<li>
<p><strong>Blockchain 2.0 - Verträge</strong>: In diese Kategorie würden alle Anwendungen fallen die mehrstufige Handlungsmuster umfassen, welche durch Regeln oder Wenn-Dann Beziehungen verknüpft sind. Dies könnten Crowdfunding Verträge, Initial Coin Offerings (ICOs), jegliche Formen von Wertpapieren bis hin zu Dezentralen Autonomen Organisationen (DAOs) sein.</p>
</li>
<li>
<p><strong>Blockchain 3.0 - Dezentrale Anwendungen</strong>: Hierein fallen ein breites Spektrum von Anwendungen, welche Einfluss auf politische Prozesse und den Rechtsstaat nehmen könnten. Diese Kategorie ist eher als Ausblick zu verstehen, folgendes könnte dies betreffen: Demokratische Prozesse und Wahlen, Austellung von Identitätsdokumenten, Notariat bis Hin zur Abbildung des Gesundheitswesens.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_blockchain_anwendungsarchitektur">Blockchain Anwendungsarchitektur</h3>
<div class="paragraph">
<p>Klassische Softwareanwendungen sind nach einem Client-Server Paradigma strukturiert. Teile der Anwendung finden sich dabei im Client und andere Teile im Server. Daten werden jedoch immer am Server zentral gehalten. Blockchain Anwendungen sind hierbei anders strukturiert. Der Client kann dabei zwar zentral gehostet werden bzw. auch dezentral zB über IPFS. Die Daten sind jedoch immer dezentral in der Blockchain abgebildet. Blockchain Anwendungen werden vorwiegend mit Web-Technologien als Web-Anwendung entwickelt. Es besteht jedoch der Unterschied zu einer normalen Web-Anwendung, dass die relevante Kommunikation mit dem Ethereum Netzwerk stattfindet und nicht mit einem zentralen Server.</p>
</div>
<div id="dapp-architecture-image" class="imageblock">
<div class="content">
<img src="images/DAPP_ARCHITECTURE.png" alt="Blockchain Anwendungsarchitektur">
</div>
<div class="title">Figure 1. Blockchain Anwendungsarchitektur</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>DApp Browser</em>: Es gibt unterschiedliche Varianten von DApp Browsern. Es kann sich um eine vollständige Anwendung handeln, welche eine lokalen Ethereum-Knoten, eine Wallet und eine Laufzeitumgebung für Web-Anwendungen enthält. Ein Beispiel dafür wäre der Ethereum Mist Browser. Es gibt jedoch auch eine leichtgewichtigere Variante, welche einen klassischen Web-Browser mittels einer Browser Erweiterung in einen DApp Browser verwandelt. Die Browser Erweiterung MetaMask würde zum Beispiel eine solche Erweiterung sein.</p>
</li>
<li>
<p><em>Kommunikation</em>: Der DApp Browser kann über einen lokalen Ethereum Knoten mit dem Ethereum Netzwerk kommunizieren. Dies wäre sicherlich die sicherste Variante, hat aber den Nachteil, dass der Betrieb eines Ethereum Knotens sehr ressourcenaufwendig ist. Vorallem für mobile Geräte eignet sich der Betrieb eines Ethereum Knotens in keinster Weise. Zentralisierte Dienste bieten die Möglichkeit das Ethereum Netzwerk ähnlich wie einen Proxy zu nutzen. Der Dienst Infura wäre ein Beispiel dafür. Die Browser-Erweiterung MetaMask sowie unterschieldiche mobile DApp Browser nutzen diese Art von Diensten. Dies hat klarerweise den Nachteil das die Dezentralität der Anwendung dadurch minimiert wird.</p>
</li>
<li>
<p><em>Wallet</em>: Jede Änderung innerhalb der Blockchain kann nur als Transaktion, welche von einem privaten Schlüssel des Benutzers signiert wurde, durchgeführt werden. Dazu ist es essentiell das der DApp Browser mit einer Wallet verknüpft ist. Diese Wallet kann als externe Anwendung oder integriert in den DApp Browser geführt werden. Die Sicherheit des Benutzers hängt direkt mit der Sicherheit der Wallet in Verbindung. Deshalb ist es wesentlich, dass Benutzer größte Sorgfalt über die Sicherheit ihres privaten Schlüsselmaterials walten lassen.</p>
</li>
<li>
<p><em>Hosting</em>: Eine DApp muss gehostet werden damit sie einem Benutzer verfügbar gemacht werden kann. Dieses Hosting kann entweder zentralisiert auf einem Server, welcher vom Ersteller der DApp verwaltet wird geschehen, oder aber auch auf einem dezentralen Dateisystem. Als dezentrale Dateisysteme kann zB IPFS genutzt werden. Die Nutzung eines dezentralen Dateisystems hat den Vorteil, dass generell wenig Möglichkeiten bestehen die DApp für Benutzer zu zensieren.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_szenario_1">Szenario 1</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="section0101">Problemstellung: Online Sportwetten</h3>
<div class="paragraph">
<p>Online Wettportale sind sehr verbreitet im WWW. Diese Portale werden von zentralisierten Betreibern bereitgestellt. Die Berechnung der Gewinnquoten und Ausschüttungen sind oft sehr intransparent und wenig nachvollziehbar. Am vereinfachten Beispiel einer Sportwette sollen die Funktionsweise und Eigenschaften einer online Wette skizziert werden. Dazu wird die Wette auf das Ergebnis eines Fußballspiels betrachtet. Ein Fußballspiel zwischen zwei Maschaften A und B kann generell drei Ergebnisse bzw. Endzustände aufweisen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mannschaft A gewinnt und Mannschaft B verliert</p>
</li>
<li>
<p>Mannschaft B gewinnt und Mannschaft A verliert</p>
</li>
<li>
<p>das Spiel geht unentschieden aus</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Um nun eine Wette auf eines der möglichen Ergebnisse abzugeben, würde normalerweiße ein sog. Buchmacher konsultiert. Dieser würde Wetten von unterschiedlichen Teilnehmern, mit unterschiedlichen Wetteinsätzen und natürlich unterschiedlichen Tipps entgegennehmen. Dies sollte klarerweise alles vor dem Start eines Fußballspiels geschehen. Aus den gesamten abgegebenen Wetten kann dann die sog. Gewinnquote für die jeweiligen Ergebnisse berechnet werden. Diese Quote gibt an mit welchem Faktor der Wetteinsatz im Falle eines richtigen Tipps multipliziert wird. Aus der Quote errechnet sich somit der mögliche Gewinn für die Wettteilnehmer. In Tabelle 1 wird ein Beispiel eines möglichen Wettverlaufs dargestellt. In diesem vereinfachten Beispiel ist davon auszugehen, dass keine Gebühren für den Buchmacher bzw. keine Steuern erhoben werden.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 18.1818%;">
<col style="width: 27.2727%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Tipp</th>
<th class="tableblock halign-left valign-top">Ergebnis</th>
<th class="tableblock halign-center valign-top">kummulierte Einsätze</th>
<th class="tableblock halign-center valign-top">Prozent</th>
<th class="tableblock halign-center valign-top">Gewinnquote</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gesamt</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">€ 80.000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">100%</p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Tipp 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mannschaft A gewinnt</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">€ 20.000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">25%</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Tipp 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mannschaft B gewinnt</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">€ 50.000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">62,5%</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1,6</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Tipp 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unentschieden</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">€ 10.000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">12,5%</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Die Wettquote berechnet sich somit konkret über den gesamten Wetteinsatz dividiert durch die kummulierten Wetteinsätze aller Teilnehmer für den jeweiligen Tipp. Die Gewinnquote bedeutet somit für einen Wettteilnehmer, dass für jeden Euro der investiert wird das 4-, 1,6- bzw. 8-fache als Gewinn verbucht werden kann. An den Beispielzahlen ist zu erkennen, dass eine Gewinnquote immer größer als 1 sein muss, andernfalls würde die Teilnahme an einer Wette keinen Sinn machen. Zusätzlich ist zu sehen, dass der Tipp mit dem kleinsten kummulierten Wetteinsatz die höchste Gewinnchance bietet. Eine Wette auf das Ergebnis mit der höchsten Gewinnchance ist oft auch mit dem größten Verlustrisiko verbunden.</p>
</div>
<div class="paragraph">
<p>Falls ein online Wettbüro Wetten abbildet, werden die Wetteinsätze zu den unterschiedlichen Ereignissen nicht offen kommuniziert. Die Quoten werden ebenfalls im geheimen festgelegt. Ein Wettteilnehmer hat somit keine Möglichkeit sich eine genaue Kenntnis über den Ablauf zu verschaffen. Ebenfalls obliegt es dem online Wettbüro Auszahlungen zu tätigen oder auch nicht. Wettteilnehmer müssen dem Wettbüro vertrauen und sind dessen Willkür ausgeliefert.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Kollektive Intelligenz</div>
<div class="paragraph">
<p>Wetten könnten auch als Vorhersagen betrachtet werden und die kummulierten Wetteinsätze als Eintrittswahrscheinlichkeit gedeutet werden. Im Beispiel der Fußballwette könnte dies so interpretiert werden, dass mit einer Wahrscheinlichkeit von 12,5% ein Unentschieden gespielt wird. Blockchainstartups wie <code>Augur</code><sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup>, <code>Gnosis</code><sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</sup> oder <code>Stox</code><sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnote_3" title="View footnote.">3</a>]</sup> machen sich genau diesen Umstand zu nutze und bietet Vorhersagen der "kollektiven Intelligenz" als Dienstleistung an. Dies ist auch unter den Bezeichnungen <code>crowd sourcing</code> oder <code>prediction markets</code> bekannt.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="section0102">Smart Contracts</h3>
<div class="paragraph">
<p>Üblicherweiße würde eine Sportwette wie oben beschrieben von einem Buchmacher abgewickelt. Dieser Buchmacher würde sich um die ordnungsmäßige Abwicklung der Wette kümmern. Je nach Vertrauen gegenüber dem Buchmacher, würden Wettteilnehmer dort Wetten abschließen oder auch nicht. Je nach Einsicht der Wettteilnehmer könnte ein Buchmacher Gewinnquoten zu seinen Gunsten manipulieren oder hohe Gebühren für Gewinne erheben.</p>
</div>
<div class="paragraph">
<p>Die ordnungsmäßige bzw. korrekte Abwicklung einer Sportwette kann jedoch formal wie in einem Algorithmus bzw. einem Computerprogramm beschrieben werden. Diesen Umstand haben sich bereits etliche online Sportwettanbieter zu nutze gemacht. Anstelle einer vertrauenswürdigen Person, welche als Buchmacher Wetten entgegennimmt, kann dies auch über eine Software Anwendung geschehen. Hierbei wird jedoch nur die Abwicklung an sich digitalisiert, eine Manipulation ist dabei noch nicht ausgeschlossen. Gemeinhin ist es so, dass Software Anwendungen zentral verwaltet sind und es ist nicht möglich den Programmcode einzusehen. Es wäre einem Wettteilnehmer also nicht möglich zu prüfen, ob die Software des Sportwettanbieters so agiert wie angepriesen. Es könnte durchaus passieren, dass auch nach einer gewonnen Wette, der Wetteinsatz nicht ordnungsgemäß ausbezahlt wird.</p>
</div>
<div class="paragraph">
<p>Ein Smart Contract hingegen ist ähnlich einem Computerprogramm, das nachvollziehbar genau das macht, was beschrieben ist und dies unmanipulierbar durchführt. Im Englischen wird dies auch mit dem Ausspruch "Code is Law" bekräftigt. Dies deutet darauf hin, dass so wie es im Quelltext des Smart Contracts beschrieben ist, so gilt es auch (ähnlich wie ein Gesetz).</p>
</div>
<div class="paragraph">
<p>Ebenfalls sind alle Daten, welche im Smart Contract durch die Interaktion der Wettteilnehmer, öffentlich einsehbar gespeichert. Jeder Wettteilnehmer würde zwar unter einem Pseudonym an der Wette teilnehmen, sodass nicht erörtert werden kann wer konkret hinter einer Wette steckt, jedoch ist die Höhe des Einsatzes und der getätigte Tipp öffentlich. Somit sind alle Informationen transparent und öffentich sichtbar. Mögliche Manipulationen eines Buchmachers sind dadurch ausgeschlossen.</p>
</div>
<div class="paragraph">
<p>Zum Überblick wird die Logik des Smart Contracts, welcher die Sportwette repräsentieren soll, in 3 Phasen eingeteilt. Diese 3 Phasen werden sequentiell ausgeführt, folgend eine Kurzbeschreibung der Phasen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Phase 1: Innerhalb dieser Phase können Wettteilnehmer ihre Wetten platzieren. Diese Phase würde solange andauern, bis das Fußballspiel gestartet wird. Nach diesem Ereignis können keine Wetten mehr platziert werden.</p>
</li>
<li>
<p>Phase 2: Diese Phase würde während das Fußballspiels ablaufen. Der Smart Contract wäre im sog. Leerlauf und würde nur auf das Ereignis "Ende des Fußballspiels" warten.</p>
</li>
<li>
<p>Phase 3: Der letzte Phase, nachdem das Spielergebnis feststeht, wäre die Auszahlung. Die Wettteilnehmer, welche die Wette zu ihren Gunsten platziert haben, können sich nun ihre Gewinne auszahlen.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Eine paar wichtige Aspekte, welche für Smart Contracts im Allgemeinen zu beachten sind:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Smart Contracts sind autonom in ihrer Ausführung. Falls ein Smart Contract einmal im Netzwerk bereitsgestellt ist, steht dieser dort für immer bereit. Die programmierten Regeln sind somit gültig und können nicht mehr abgeschaltet oder verändert werden.</p>
</li>
<li>
<p>Die Kommunikation mit Smart Contracts wird über Transaktionen realisiert. Dabei kann eine Transaktion sowohl Daten als auch Werte, abgebilded als virtueller Token, enthalten. Mit der Transaktion wird dem Smart Contract die Hoheit über die übermittelten Werte übertragen.</p>
</li>
<li>
<p>Für die Ausführung eines Smart Contracts muss bezahlt werden. Die Mining-Knoten, welche das Netzwerk betreiben, bekommen eine Gebühr (Mining Fee) als Entschädigung für ihre Arbeitsleistung. Jede Transaktion, welche mit dem Smart Contract interagiert, muss auch genügend Mittel bereitstellen, damit die programmierten Regeln ausgeführt werden.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="section0103">Implementierung mit Solidity</h3>
<div class="paragraph">
<p>In diesem Abschnitt werden einige Ausschnitte des Programmcodes angeführt und erläutert. Dies soll dazu dienen den Smart Contract zu dokumentieren und wesentliche Konzepte der Programmiersprache Solidity einzuführen.</p>
</div>
<div id="solidity01" class="listingblock">
<div class="title">Listing 1</div>
<div class="content">
<pre>contract SportsBet {
}</pre>
</div>
</div>
<div class="paragraph">
<p>Jeder Smart Contract wird wie oben veranschaulicht (<a href="#solidity01">Listing 1</a>) über das Schlüsselwort <code>contract</code> deklariert. Dies hat eine starke Ähnlichkeit zur Deklaration von Klassen in Objektorientierten Programmiersprachen (OOP). Im allgemeinen gibt es eine Vielfach Ähnlichkeiten mit OOP, sodass für Softwarentwickler das erlernen von Solidity eine geringe Lernkurve aufweist.</p>
</div>
<div id="solidity02" class="listingblock">
<div class="title">Listing 2</div>
<div class="content">
<pre>contract SportsBet is Ownable {
}</pre>
</div>
</div>
<div class="paragraph">
<p>Solidity unterstützt auch das Konzept der Vererbung (<a href="#solidity02">Listing 2</a>). Dies ist hilfreich um die Wiederverwendbarkeit von Programmcode zu erhöhen. Über das Schlüsselwort <code>is</code> erbt <code>SportsBet</code> von <code>Ownable</code>. Alle Funktionen, welche in Owned definiert sind, sind somit auch Teil von <code>SportsBet</code>. Neben der einfachen Vererbung werden auch <code>Interfaces</code> bzw. <code>abstrakte Methoden</code> unterstützt.</p>
</div>
<div id="solidity03" class="listingblock">
<div class="title">Listing 3</div>
<div class="content">
<pre>contract SportsBet is Ownable {

    // unique identifier of sports game
    string public game;

    function SportsBet(string _game) {
        game = _game;
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Eine wesentliche und wichtige Eigenschaft von Smart Contracts ist es Zustände zu speichern. Dazu können Attribute bzw. Zustandsvariablen deklariert werden. In <a href="#solidity03">Listing 3</a> wird dazu eine Variable mit Namen <code>game</code> deklariert. Diese Variable hat den Datentyp <code>string</code> und kann Zeichenketten enthalten. Solidity unterstützen unterschiedlichste Datentypen, eine umfassende Liste ist der Dokumentation <a href="http://solidity.readthedocs.io/en/latest/types.html">(Liste aller Solidity Datentypen)</a> zu entnehmen. Mit der Angabe <code>public</code> wird die Sichtbarkeit der Variable für andere Smart Contracts angegeben. Somit kann die Variable <code>game</code> von anderen Smart Contracts abgefragt werden. Neben <code>public</code> gibt es weitere Sichtbarkeitsdeklarationen, welche ebenfalls für Funktionen gelten und weiter unten eingeführt werden.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Sichtbarkeit von Zuständen</div>
<div class="paragraph">
<p>Alle Zustände, welche innerhalb eines Smart Contracts hinterlegt werden, sind grundsätzlich über die Blockchain öffentlich einsehbar. Die Sichtbarkeit einer Variable innerhalb eines Smart Contracts (<code>public</code>, <code>private</code>, <code>internal</code> oder <code>external</code>) bezieht sich dabei nur auf die programmatischen Zugrifssmöglichkeiten anderer Smart Contracts. Es gibt keine Möglichkeit Daten innerhalb einer Blockchain "nicht-öffentlich" zu speichern. Somit sind alle Daten die von einem Smart Contract zur Bearbeitung benötigt werden öffentlich.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ein Smart Contract kann des Weiteren über einen sog. Konstruktor verfügen. <a href="#solidity03">Listing 3</a> enthält ebenfalls einen Konstruktor. Dieser ist generell nichts anderes als eine normale Funktion, mit dem Unterschied, dass der Funktionsname mit dem Namen des Smart Contracts übereinstimmen muss. Eine Funktionsdeklaration wird über das Schlüsselwort <code>function</code> durchgeführt. Die Funktion kann Übergabeparameter definieren, welche zur Konstruktion des Smart Contracts mitgegeben werden müssen.</p>
</div>
<div id="solidity04" class="listingblock">
<div class="title">Listing 4</div>
<div class="content">
<pre>contract SportsBet is Owned {

    struct Bet {
        uint tip;
        uint amount;
    }

    mapping (address =&gt; Bet) bets;

    function bet(uint tip) public payable {
        if (tip &lt; 1) {
            tip = 1;
        } else if (tip &gt; 3) {
            tip = 3;
        }

        if (bets[msg.sender].tip == 0) {
            bets[msg.sender].tip = tip;
        }
        bets[msg.sender].amount += msg.value;
    }

}</pre>
</div>
</div>
<div class="paragraph">
<p>Neben einfachen Datentypen wie in <a href="#solidity03">Listing 3</a> die Variable <code>game</code> können auch komplexere Datentypen selbst definiert werden. Um eine Wette zu repräsentieren wird in <a href="#solidity04">Listing 4</a> der komplexen Datentyp <code>Bet</code> eingeführt. Dieser enthält einen Zahlenwert <code>tip</code> für den Wetttipp und einen weiteren Zahlenwert <code>amount</code> für die Höhe des deklarierten Einsatzes. <code>uint</code> deklariert dabei einen sog. unsigned Integer, also einen Zahlenwert der nur positiv sein kann. Der komplexe Datentyp wird über das Schlüsselwort <code>struct</code> deklariert.</p>
</div>
<div class="paragraph">
<p>Wie bereits erwähnt besitzen Smart Contracts Funktionen. In <a href="#solidity04">Listing 4</a> werden eine Funktionen des Smart Contracts <code>SportsBet</code> implementiert. Generell stellen Funktionen (je nach Sichtbarkeit) die Schnittstelle des Smart Contracts nach Außen dar. Diese Schnittstelle wird über die sog. Signatur der Funktion definiert. Die Signatur setzt sich aus unterschiedlichen Bestandteilen zusammen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Der Name der Funktion</p>
</li>
<li>
<p>Den spezifizierten Übergabeparametern</p>
</li>
<li>
<p>Den Rückgabewerten, falls diese definiert sind</p>
</li>
<li>
<p>Sichtbarkeits- bzw. sonstigen Modifikatoren</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Neben der Signatur, welche auch als Funktionskopf bezeichnet werden kann, gibt es einen Funktionskörper. Der Funktionskörper wird von zwei geschwungenen Klammern umschlossen <code>{ }</code>. Innerhalb dieses Körpers wird die Logik der Funktion implementiert. Dazu werden unterschiedliche Konstrukte der Programmierung angewandt. In der Funktion <code>bet</code> aus <a href="#solidity04">Listing 4</a> werden sog. Kontrollstrukturen eingesetzt, um den übergebenen Parameter zu überprüfen. Die verfügbaren Kontrollstrukturen in Solidity können in der Dokumentation <a href="https://solidity.readthedocs.io/en/latest/control-structures.html#control-structures">(Kontrollstrukturen in Solidity)</a> eingesehen werden. Falls die Signatur Rückgabewerte definiert, müssen diese über das Schlüsselwort <code>return</code> übergeben werden. Dieses Schlüsselwort beendet ebenfalls die Ausführung der Funktion.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Sichtbarkeitsmodifikatoren</div>
<div class="paragraph">
<p>Funktionen und Zustandsvariablen besitzen eine Sichtbarkeit innerhalb des Smart Contracts bzw. nach Außen zum Netzwerk. Solidity bietet 4 verschiedene Sichtbarkeitsmodifikatoren.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>external</code>: Externe Funktionen bilden u.a. die Schnittstelle nach Außen eines Smart Contracts. Externe Funktionen können nur über Transaktionen, von anderen Smart Contracts oder über einen Message Call aufgerufen werden. Ein interner Aufruf der Funktion ist nur über <code>this</code> möglich. Zustandsvariablen können nicht als <code>external</code> deklariert werden.</p>
</li>
<li>
<p><code>public</code>: Funktionen und Zustandsvariablen können intern oder extern aufgerufen werden. Für Zustandvariablen, welche als <code>public</code> deklariert wurden, wird automatisch eine sog. Getter-Funktion erzeugt.</p>
</li>
<li>
<p><code>internal</code>: Ein Zugriff auf <code>internal</code> Funktionen oder Zustandsvariablen ist nur vom deklarierten oder vererbeten Smart Contract möglich.</p>
</li>
<li>
<p><code>private</code>: Zustandsvariablen bzw. Funktionen dieser Sichtbarkeit sind nur innerhalb des Smart Contracts ansprechbar.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Die Defaultsichtbarkeit von Funktionen ist <code>public</code> und die von Zustandsvariablen ist <code>internal</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ein weiteres Konzept in <a href="#solidity04">Listing 4</a> ist das sog. <code>mapping</code>. Mappings sind sehr wichtige und effiziente Strukturen zur Speicherung von Zuständen in Smart Contracts. In anderen Programmiersprachen werden Mappings auch assoziativ Speicher oder Hashtabellen gennant. Ein mapping ist demnach eine Datenstruktur um Werte anhand einen Schlüssels zu speichern bzw. abzufragen. Das deklarierte <code>mapping</code> in <a href="#solidity04">Listing 4</a> speichert Wetten (<code>Bet</code>) anhand der Adresse (<code>address</code>) des Wettteilnehmers.</p>
</div>
<div class="paragraph">
<p>Die Funktion <code>bet</code> in <a href="#solidity04">Listing 4</a> speichert den übergebenen Parameter <code>tip</code> als Wette (<code>Bet</code>) innerhalb des <code>mapping</code> (<code>bets</code>). Die Funktion prüft zuerst ob ein valider Tipp (Tipp 1, Tipp 2 oder Tipp 3) abgegeben wurde. Dannach wird überprüft ob der Absender der Transaktion und somit der Aufrufer der Funktion <code>bet</code> bereits eine Wette abgegeben hat. Der Absender der Transaktion wird über die spezielle Variable <code>msg.sender</code> abgefragt. Falls noch kein Tipp abgegeben wurde, wird dieser für den Absender gesetzt. Dazu wird der Tip über das <code>mapping</code> mit dem Schlüssel <code>msg.sender</code> (<code>msg.sender</code> ist vom Datentyp <code>address</code>) in der Wette (<code>Bet</code>) gesetzt. In jedem Fall wird der Wetteinsatz erhöht. Dazu wird die Höhe des gesendeten Ethers zum Wetteinsat (<code>amount</code>) addiert.</p>
</div>
<div class="paragraph">
<p>Die Transaktion, welche die Funktion des Smart Contracts aufruft, sendet Ether als Wetteinsatz mit. Dieses Ether wird dem Smart Contract bereitgestellt und dieser verfügt nun darüber.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Spezielle Variablen: Block bzw. Transaktions Eigenschaften</div>
<div class="paragraph">
<p>Funktionen haben Zugriff auf spezielle Variablen, welche wichtige Informationen über den aktuellen Ausführungskontext enthalten. So kann zB über die Variable <code>msg</code> auf den Absender der Transaktion (<code>msg.sender</code>) den gesendeten Betrag an Ether (<code>msg.value</code>) oder das noch verfügbare Gas (<code>msg.gas</code>) zugegriffen werden. Alle verfügbaren bzw. speziellen Variablen sind in der Dokumentation <a href="https://solidity.readthedocs.io/en/latest/units-and-global-variables.html#special-variables-and-functions">(Spezielle Variablen in Solidity)</a> einsehbar.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="solidity05" class="listingblock">
<div class="title">Listing 5</div>
<div class="content">
<pre>contract SportsBet is Owned {

    // other code

    function finalizeBet(uint8 _winningTip) external onlyOwner {
        winningTip = checkTip(_winningTip);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Nachdem das entsprechende Wettereignis feststeht, muss dieses im Smart Contract mitgeteilt werden. Dazu wurde eine Funktion <code>finalizeBet</code> im Smart Contract <a href="#solidity05">Listing 5</a> deklariert. Diese Funktion enhält einen <code>modifier</code> mit der Bezeichnung <code>onlyOwner</code>. Dieser Modifier gibt an, dass diese Funktion nur vom Ersteller der Wette ausgeführt werden kann.</p>
</div>
<div id="solidity06" class="listingblock">
<div class="title">Listing 6</div>
<div class="content">
<pre>contract SportsBet is Owned {

    // other code

    function payout() external {
        require(
            winningTip &gt; 0 &amp;&amp;
            betTips[msg.sender] == winningTip &amp;&amp;
            betAmounts[msg.sender] &gt; 0
        );

        uint256 odds = calculateOdds(winningTip);
        uint256 out = betAmounts[msg.sender].mul(odds);

        if (this.balance &gt;= out) {
            betAmounts[msg.sender] = 0;
            msg.sender.transfer(out);
        }
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Letztlich soll noch eine Möglichkeit geschaffen werden, nachdem eine Wette abgeschlossen wurde, die Auszahlungen an Wettteilnehmer durchzuführen. In <a href="#solidity06">Listing 6</a> wird die Funktion <code>payout</code> eingeführt, welche die umsetzt. Die Funktion beginnt mit einem <code>require</code> Block, dieser gibt Bedingungen an, welche bestehen müssen, sodass die weiteren Schritte im Code ausgeführt werden. Im konkreten Fall sind dort 3 Bedingungen definiert:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Die Wette muss finalisiert worden sein. Also die Funktion <code>finalizeBet</code> muss bereits ausgeführt worden sein und den entsprechenden Siegestipp angegeben haben.</p>
</li>
<li>
<p>Der Aufrufer der <code>payout</code> Funktion muss den richtigen Tipp gemacht haben.</p>
</li>
<li>
<p>Der Aufrufer muss einen Betrag größer 0 gesetzt haben.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Falls die 3 Bedingungen erfüllt sind, wird der entsprechende Gewinnbetrag an den Aufrufer gesendet. Dazu wird die spezielle Variable <code>msg.sender</code> verwendet, welche das Konto des Aufrufers spezifiziert. mit der Funktion <code>transfer</code> wird der berechnete Gewinnbetrag in Ether an den Aufrufer gesendet und somit die Auszahlung durchgeführt.</p>
</div>
</div>
<div class="sect2">
<h3 id="section0104">Web-Anwendung</h3>
<div class="paragraph">
<p>Die Web-Anwedung ermöglicht es neue Wetten zu erstellen, welche als Instanzen des Smart Contract <code>SportsBet</code> in der Blockchain abgelegt werden. In <a href="#bet1-image">Sportwetten Web-Anwendung 1</a> wird ein Formular gezeigt mit dem eine Wette angelegt werden kann. Es kann ein Name für die Wette angegeben werden, sodass Wetten von Wettteilnehmer aufgefunden werden können. Des Weiteren kann der Wettzeiraum festgelegt werden bis zu dem Wetten abgegeben werden können.</p>
</div>
<div id="bet1-image" class="imageblock">
<div class="content">
<img src="images/BET_01.png" alt="Sportwetten Web-Anwendung">
</div>
<div class="title">Figure 2. Sportwetten Web-Anwendung 1</div>
</div>
<div class="paragraph">
<p>Die neu erstellte Sportwette wird nun in der Übersicht <a href="#bet2-image">Sportwetten Web-Anwendung 2</a> der "5 neuesten Wetten" gelistet. Von dort können die Details zu dieser Wette eingesehen weren.</p>
</div>
<div id="bet2-image" class="imageblock">
<div class="content">
<img src="images/BET_02.png" alt="Sportwetten Web-Anwendung">
</div>
<div class="title">Figure 3. Sportwetten Web-Anwendung 2</div>
</div>
<div id="bet3-image" class="imageblock">
<div class="content">
<img src="images/BET_03.png" alt="Sportwetten Web-Anwendung">
</div>
<div class="title">Figure 4. Sportwetten Web-Anwendung 3</div>
</div>
<div class="paragraph">
<p>Die Wettübersicht <a href="#bet3-image">Sportwetten Web-Anwendung 3</a> gibt Aufschluss darüber wie der aktuelle Stand aller Tipps und die entsprechende Verteilung der Einsätze aussieht. Es wird gezeigt wer der Ersteller der Wette ist und ebenfalls wir ein Link zu einem Ethereum Block-Explorer bereitgestellt, welcher alle Transaktionen bzw. den Smart Contract ansicht zeigt.</p>
</div>
<div class="paragraph">
<p>Solange der erlaubte Zeitraum zur Abgabe von Sportwetten noch nicht abgelaufen ist, können Wetten platziert werden. In <a href="#bet4-image">Sportwetten Web-Anwendung 4</a> ist die Ansicht der Wettabgabe einsehbar. Diese Ansicht erlaubt einerseit die Abgabe eines Tipps (Team 1, Team 2 oder Unentschieden) bzw. die Festlegung eines Wetteinsatzes.</p>
</div>
<div id="bet4-image" class="imageblock">
<div class="content">
<img src="images/BET_02.png" alt="Sportwetten Web-Anwendung">
</div>
<div class="title">Figure 5. Sportwetten Web-Anwendung 4</div>
</div>
<div class="paragraph">
<p>Letztlich wird nachdem die Wettzeit abgelaufen ist und die Wettdetails vom Ersteller betrachtet werden eine Möglichkeit geschaffen um die Wette abzuschließen. Dazu kann der Ersteller den Siegestipp festlegen (Team 1, Team 2 oder Unentschieden). Veranschaulicht wird das in <a href="#bet5-image">Sportwetten Web-Anwendung 5</a></p>
</div>
<div id="bet5-image" class="imageblock">
<div class="content">
<img src="images/BET_05.png" alt="Sportwetten Web-Anwendung">
</div>
<div class="title">Figure 6. Sportwetten Web-Anwendung 5</div>
</div>
<div class="paragraph">
<p>Falls ein Wettteilnehmer einen richtigen Tip abgegeben hat, kann dieser die Möglichkeit einer Auszahlung nutzen. Dies wird in <a href="#bet6-image">Sportwetten Web-Anwendung 6</a> dargestellt.</p>
</div>
<div id="bet6-image" class="imageblock">
<div class="content">
<img src="images/BET_06.png" alt="Sportwetten Web-Anwendung">
</div>
<div class="title">Figure 7. Sportwetten Web-Anwendung 6</div>
</div>
</div>
<div class="sect2">
<h3 id="section0105">Diskussion</h3>
<div class="paragraph">
<p>Die Demonstration zeigt ein vollwertiges und dezentrales Beispiel einer Smart Contract Anwendung inklusive Webbasierter Benutzerschnittstelle zur Abwicklung einer Sportwette. In der Anwendung gibt es eine bestehende Herausforderung und dies ist die Feststellung des tatsächlichen Wettausgangs. Im Falle der Demonstration wurde das Wettergebnis vom Ersteller der Wette angegeben, dies kann klarerweiße zu Manipulationen führen. Es könnte durchaus den Fall geben, dass der Ersteller der Wette selbst Wettteilnehmer ist und mit dem Ausgang des Sportereignisses nicht zufrieden ist und somit eine falsche für den Ersteller günstige Angabe gibt. Um dies zu verhindern könnte entweder ein sog. Oracle eingebunden werden oder eine Möglichkeit zur gemeinschaftlichen Konsensfindung geschaffen werden.</p>
</div>
<div class="paragraph">
<p>Smart Contracts können nur Daten verarbeiten, welche bereits in der Blockchain existieren. Der Ausgang eines Sportereignisses ist als Datum in der Blockchain nicht verfügbar. Ein Oracle ist ein Dienst, welcher vertrauensvoll Daten aus der realen Welt in die Blockchain schreibt, sodass abhängige Smart Contracts, sowie die Sportwette, diese Daten nutzen können. Es gibt derzeit unterschiedliche Oracles für Ethereum, jedoch sind diese kostenpflichtig und nicht für alle Daten der realen Welt nutzbar. Für zB größere Sportereignisse gibt es Web-APIs, welche Ergebnisse bereitstellen. Bei kleineren regionaleren Sportereignissen sind diese Möglichkeiten jedoch nicht vorhanden und somit kann schwer auf einen Oracle Dienst zurückgegriffen werden.</p>
</div>
<div class="paragraph">
<p>Als andere Möglichkeit könnte man im Smart Contract vorsehen, dass zumindest 10 Wetteilnehmer, welche mindestens einen gewissen Anteil der Wettsumme beigegeben haben die Wette finalisieren müssen. Eine weitere Möglichkeit wäre, dass ein vertrauenswürdige 3. Partei den Wettabschluss tätigen darf. Dies könnte eine Instanz sein, welche das Vertrauen von allen Wettteilnehmern hat, zB eine Instanz die in der Vergangenheit bereits immer wahrheitsgemäß Wettabschlüsse in die Blockchain eingetragen hat.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_szenario_2">Szenario 2</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="section0201">Problemstellung: Domain Name System</h3>
<div class="paragraph">
<p>Das Internet und alle darauf basierenden Dienste nutzen sog. IP-Adressen um Rechner im Netzwerk zu identifizieren. IP-Adressen sind mehrstellige Zahlenkombinationen und für Menschen schwer zu merken, sodass Domain-Namen eingeführt wurden um dies zu erleichtern. Ein Domain-Name ist ein leicht merkbarer Bezeichner, welcher quasi als Alias für eine IP-Adresse verwendet wird.</p>
</div>
<div class="paragraph">
<p>Das System, welches die Namensauflösung, also die Umwandlung von Domain-Name in eine IP-Adresse, ist das Domain Name System (DNS). DNS ist zwar grundsätzlich eine dezentrale Datenbank unterliegt jedoch zentraler Kontrolle. An der obersten Hierarchieebene steht dabei die Internet Corporation for Assigned Names and Numbers (ICANN), welche Top Level Domains (TLD) vergibt und die Verwaltung dieser an die jeweiligen regionalen Verwaltungen weiterreicht. Die regionalen Verwaltungen vertreiben die Domain-Namen dann über akkreditierte Registrare an Domain Käufer.</p>
</div>
<div class="paragraph">
<p>DNS basiert auf einer Serverinfrastruktur, welche Anfragen für die Übersetzung von Domain-Namen zu IP-Adressen vornehmen. Über die Kontrolle der DNS-Server können Domain-Namen in DNS-Zonen manipuliert und damit zB zensiert werden. So können zB Webseiten wie Wikipedia in Ländern wie der Türkei gesperrt werden.</p>
</div>
<div class="paragraph">
<p>Ein auf Blockchain-Technologie basierendes Domain Name System würde es ermöglichen nicht nur die Datenhaltung zu dezentralisieren, sonder auch die Kontrolle über die DNS-Einträge. So würde zB der DNS-Eintrag für Wikipedia nur vom Betreiber selbst verwaltet und verändert werden können.</p>
</div>
</div>
<div class="sect2">
<h3 id="section0202">Demonstration einer Subdomain Registry</h3>
<div class="paragraph">
<p>Als Prototyp einer dezentralen Domain Registrierung wird dies anhand einer Demonstration mittels von Subdomain Redirects realisiert. Das "Eigentum" von Subdomains einer Toplevel Domain werden über einen Smart Contract verwaltet. Folgende Funktionen sind verfügbar:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Es können für einen Gegenwert, welcher in Ether bezahlt wird, Subdomains für einen Zeitraum registriert werden.</p>
</li>
<li>
<p>Der Eigentümer der Subdomain kann einen beliebigen Redirect Link hinterlegen. Bei Aufruf der Subdomain über einen Browser soll ein Redirect zum hinterlegten Link durchgeführt werden.</p>
</li>
<li>
<p>Nach einer gewissen Dauer soll die Registrierung ablaufen. Der Eigentümer hat jedoch während des Registrierungszeitraums die Möglichkeit der Verängerung der Registrierung.</p>
</li>
<li>
<p>Der Ersteller des Smart Contracts soll die Möglichkeit haben unsachgemäße Registrierungen zu löschen.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="section0203">Smart Contract</h3>
<div class="paragraph">
<p>Im folgenden soll der entsprechende Smart Contract zur Registrierung von Subdomain Redirects besprochen werden. Dabei werden Ausschnitte des gesamten Smart Contracs einzeln angeführt.</p>
</div>
<div id="solidity0201" class="listingblock">
<div class="title">Listing 2.1</div>
<div class="content">
<pre>contract SubdomainRedirect {

  struct SubdomainEntry {
    string redirect;
    address owner;
    uint registeredUntil;
  }

  uint public registrationFee = 5 finney;
  uint public registrations = 0;
  mapping (string =&gt; SubdomainEntry) entries;
  mapping (uint =&gt; string) names;

  // ...

}</pre>
</div>
</div>
<div class="paragraph">
<p>In <a href="#solidity0201">Listing 2.1</a> werden die generischen Smart Contract Attribute aufgeführt. Als wesentlicher Bestandteil ist die Datenstruktur <code>SubdomainEntry</code> zu nennen, welche eine Registrierung repräsentiert. Folgende Attribute sind im <code>SubdomainEntry</code> enthalten:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>redirect</code> ist eine Zeichenkette, welche den hinterlegten Redirect Link enthält.</p>
</li>
<li>
<p><code>owner</code> repräsentiert den Eigentümer der Registrierung als Ethereum adresse.</p>
</li>
<li>
<p><code>registeredUntil</code> gibt den Zeitstempel an, an dem die Registrierung abläuft.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Im Smart Contract ist des weiteren eine <code>registrationFee</code> hinterlegt, welche die Kosten für eine Registrierung angibt. Im Beispiel werden 5 Finneys angegeben. <code>registrations</code> ist ein Zähler, welcher die Anzahl von Registrierungen angibt. <code>entries</code> enthält alle Registrierungen und sind über den Namen der Subdomain indexiert. Ein weiterer Index <code>names</code> ermöglicht die Abfrage des Namens der registrierten Subdomain anhand einer Ganzahl.</p>
</div>
<div id="solidity0202" class="listingblock">
<div class="title">Listing 2.2</div>
<div class="content">
<pre>contract SubdomainRedirect {

    // ...

    function createRegistration(string name, string redirect) external payable {
        require(
            msg.value &gt;= registrationFee &amp;&amp;
            ( entries[name].owner == address(0) ||
              entries[name].registeredUntil &lt; now ) &amp;&amp;
            bytes(redirect).length &gt; 0
        );

        entries[name].redirect = redirect;
        entries[name].owner = msg.sender;
        entries[name].registeredUntil = now + 1 years + 30 days;
        names[registrations] = name;
        registrations += 1;
    }

  // ...

}</pre>
</div>
</div>
<div class="paragraph">
<p>Eine Registrierung kann erstellt werden mittels der Funktion <code>createRegistration</code>, welche in <a href="#solidity0202">Listing 2.2</a> dargestellt ist. Die Registrierung benötigt zwei Parameter <code>name</code> und <code>redirect</code>, welche den zu registrierenden Sudomain Namen und andererseits den zu registrierenden Redirect Link spezifizieren.</p>
</div>
<div class="paragraph">
<p>Im ersten Schritt wir überprüft ob die Registrierung durchgeführt werden kann. Dazu wird überprüft ob die Gebühr enthalten ist und keine gültige Registrierung für den gewünschten Namen vorherscht. Bei einer erfolgreichen Überprüfung wird der Sender der Transaktion als Besitzer der Registrierung angegeben. Weiters wird das Ablaufdatum mit einem Jahr und 30 Tagen gesetzt.</p>
</div>
<div id="solidity0203" class="listingblock">
<div class="title">Listing 2.3</div>
<div class="content">
<pre>contract SubdomainRedirect {

    // ...

    function renewRegistration(string name) external payable {
        require(
            msg.value &gt;= registrationFee &amp;&amp;
            entries[name].owner == msg.sender
        );

        entries[name].registeredUntil = now + 1 years + 30 days;
    }

    function updateRegistration(string name, string redirect) external {
        require(
            entries[name].owner == msg.sender &amp;&amp;
            entries[name].registeredUntil &gt; now
        );

        entries[name].redirect = redirect;
    }

    // ...

}</pre>
</div>
</div>
<div class="paragraph">
<p>Neben der Erstellung einer neuen Registrierung (siehe <a href="#solidity0202">Listing 2.2</a>) können bestehende Registrierungen (1) erneuert werden bzw. (2) editiert werden. In <a href="#solidity0203">Listing 2.3</a> werden die entsprechenden Funktionen <code>renewRegistration</code> und <code>updateRegistration</code> dargestellt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Die Erneuerung der Registrierung kann über die Funktion <code>renewRegistration</code> durchgeführt werden. Als Parameter benötigt die Funktion den registrierten Namen <code>name</code>. Falls die Registrierung bereits für den Sender (<code>msg.sender</code>) vorliegt und die entsprechende Gebühr (<code>msg.value</code>) enthalten ist, kann die Erneuerung für 1 Jahr und 30 Tage durchgeführt werden.</p>
</li>
<li>
<p>Eine bestehende Registrierung kann über die Funktion <code>updateRegistration</code> durchgeführt werden. Dabei sieht die Signatur der Funktion die Parameter <code>name</code> und <code>redirect</code> vor, welche den Namen der Subdomain bzw. den neuen Redirect Link enthalten sollen. Falls die Registrierung auf den Sender (<code>msg.sender</code>) der Transaktion registriert ist, kann die Editierung durchgeführt werden.</p>
</li>
</ul>
</div>
<div id="solidity0204" class="listingblock">
<div class="title">Listing 2.4</div>
<div class="content">
<pre>contract SubdomainRedirect {

    // ...

    function clearRegistration(string name, bool full) ownerOnly external {
        entries[name].redirect = "";

        if (full) {
            entries[name].owner = address(0);
            entries[name].registeredUntil = 0;
        }
    }

    // ...

}</pre>
</div>
</div>
<div class="paragraph">
<p>Für den Ersteller des Smart Contracts wird die Funktion bereitgestellt eine Registrierung aufzulösen. Dabei besteht die Möglichkeit einer schwachen Auflösung (quasi als Warnung) und einer vollen Auflösung. Die Funktion <code>clearRegistration</code> stellt dies bereit. Als Parameter wird der Name der Registrierung (<code>name</code>) und die Angabe ob eine volle Auflösung stattfinden soll (<code>full</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="section0204">Server Anwendung</h3>
<div class="paragraph">
<p>Die Server Anwendung würde vom Betreiber der Subdomain Registry ausgeführt werden müssen. Die Server Anwendung nimmt Aufrufe entgegen und interpretiert diese entsprechend (Extraktion der Subdomain) und erzeug einen entsprechenden Redirect.</p>
</div>
<div id="listing0205" class="listingblock">
<div class="title">Listing 2.5</div>
<div class="content">
<pre class="highlight"><code>var request, response, contract;
var subdomain = '';

if (request.hasSubdomains()) {
    subdomain = request.getSubdomain();
}

var registration = contract.getRegistration(subdomain);

if (registration &amp;&amp; now &lt;= registration.registeredUntil) {
    response.redirect(registration.redirect);
} else {
    response.send(404, "No redirect registered");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In <a href="#listing0205">Listing 2.5</a> ist das Server Programm als einfaches Pseudocode Programm aufgelistet. Es gibt einen <code>request</code> an den Server, welcher falls vorhanden die Subdomain abfragen lässt (<code>request.getSubdomain()</code>). Der Smart Contract kann ebenfalls über eine Schnittstelle zum Ethereum Netzwerk abgefragt werden. Dies wird über die <code>contract</code> Variable beschrieben. So kann der <code>contract</code> über die Funktion <code>getRegistration()</code> und dem Übergabeparameter <code>subdomain</code> abgefragt werden. In der Variable <code>registration</code> befinden sich die entsprechenden Informationen zur Registrierung, falls eine vorhanden ist. Falls die Registrierung noch gültig ist (<code>now &#8656; registration.registeredUntil</code>) wir ein Redirect (<code>response.redirect()</code>) zur hinterlegten Subdomain (<code>registration.redirect</code>) initiert. Falls keine Subdomain registriert wurde, wird ein 404 Status an den Client (<code>Not Found</code>) zurückgesendet.</p>
</div>
</div>
<div class="sect2">
<h3 id="section0205">Web-Anwendung</h3>
<div class="paragraph">
<p>Die Webanwendung zur Registrierung von Subdomain Redirects bietet eine Benutzerschnittstelle um folgende Funktionen auszuführen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Die neuesten Registrierungen werden inklusive wichtiger Daten (zB Ablaufdatum) angezeigt.</p>
</li>
<li>
<p>Es können neue Registrierungen erstellt werden.</p>
</li>
<li>
<p>Die Besitzerin einer Registrierung kann jederzeit den Redirect Link verändern.</p>
</li>
<li>
<p>Die Besitzerin einer Registrierung kann die Registrierung verlängern.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In &lt;&lt;redirect-image1&gt; wird die grundlegende Benutzerschnittstelle dargestellt. Dort befinden sich 3 Buttons um die ensprechenden 3 Funktionen <code>Erstellung</code>, <code>Änderung</code> bzw. <code>Verlängerung</code> von Registierungen auszuführen. Ebenfalls sind die neuesten Registrierungen geordnet nach einem Ablaufdatum ersichtlich.</p>
</div>
<div id="redirect1-image" class="imageblock">
<div class="content">
<img src="images/REDIRECT_1.png" alt="Subdomain Registry Web Anwendung">
</div>
<div class="title">Figure 8. Subdomain Registry Web Anwendung 1</div>
</div>
<div class="paragraph">
<p>In &lt;&lt;redirect2-image&gt; ist die Maske zur Erstellung einer neuen Registrierung ersichtlich. Über diese Maske kann ein <code>Name</code> bzw. ein <code>Redirect Link</code> für die Registrierung festgelegt werden. Falls der <code>Name</code> noch verfügbar ist bzw. eine bestehende Registrierung bereits abgelaufen ist, würde eine neue Registrierung erfolgreich sein.</p>
</div>
<div id="redirect2-image" class="imageblock">
<div class="content">
<img src="images/REDIRECT_2.png" alt="Subdomain Registry Web Anwendung">
</div>
<div class="title">Figure 9. Subdomain Registry Web Anwendung 2</div>
</div>
<div class="paragraph">
<p><a href="#redirect3-image">Subdomain Registry Web Anwendung 3</a> zeigt die Maske zur Verlängerung einer bestehenden Registrierung. Die Besitzerin der Registrierung kann über die Eingabe des <code>Namen</code> der registrierten Subdomain eine Verlängerung durchführen. Dies ist nur möglich falls die Subdomain auch tatsächlich durch sie registriert wurde.</p>
</div>
<div id="redirect3-image" class="imageblock">
<div class="content">
<img src="images/REDIRECT_3.png" alt="Subdomain Registry Web Anwendung">
</div>
<div class="title">Figure 10. Subdomain Registry Web Anwendung 3</div>
</div>
<div class="paragraph">
<p>Eine bestehende Registrierung kann von der Besitzerin jederzeit abgeändert werden. Der <code>Redirect Link</code> kann somit jederzeit geändert werden. Die Besitzerin muss den <code>Name</code> der bestehenden Sudomain Registrierung und zusätzlich einen neuen <code>Redirect Link</code> angeben. Die ist in <a href="#redirect4-image">Subdomain Registry Web Anwendung 4</a> ersichtlich.</p>
</div>
<div id="redirect4-image" class="imageblock">
<div class="content">
<img src="images/REDIRECT_4.png" alt="Subdomain Registry Web Anwendung">
</div>
<div class="title">Figure 11. Subdomain Registry Web Anwendung 4</div>
</div>
</div>
<div class="sect2">
<h3 id="section0206">Diskussion</h3>
<div class="paragraph">
<p>Die Demonstration zeigt einen Smart Contract zur Subdomain-Registrierung mit zugehöriger Web-Anwendung für Benutzer und einer Serveranwendung für den Betreiber. Der Smart Contract und die Web-Anwendung können potenziell vollständig dezentralisiert werden, sodass der Einfluss des Betreibers minimiert wird. Jedoch muss die Serveranwendung, welche den Redirect durchführt zentral vom Betreiber gehostet werden. Um eine vollständige Dezentralisierung des Szenarios durchzuführen, müsste die Serveranwendung, welche eine Web-Service bereitstellt dezentralisiert werden. Es gibt Projekte (zB [<a href="https://dadi.cloud" class="bare">https://dadi.cloud</a>](DADI)) mit dem Ziel Web-Services zu dezentralisieren, eine verlässliche Nutzbarkeit ist jedoch noch ungewiss.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_szenario_3">Szenario 3</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="section0301">Problemstellung: Initial Coin Offerings</h3>
<div class="paragraph">
<p>Initial Coin Offerings (ICOs) sind eine Möglichkeit für Startups bzw. Unternehmen ein sog. Crowdfunding mittels Einsatz der Blockchaintechnologie durchzuführen. Dabei werden innerhalb eines vorgegebenen Investitionszeitraums eigens geschaffene Token gegen Investitionen in Kryptowährungen ausgegeben. Die ausgegebenen Token können unterschiedlichste Funktionen bzw. Nutzen für den Investor haben. Ebenfalls, können sie wie eine Kryptowährung genutzt werden und zB auf Börsen gehandelt werden.</p>
</div>
<div class="paragraph">
<p>Mögliche Funktionen eines ICO Tokens:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Utility Token: Die Unternehmen, welche Tokens ausgeben, integrieren den Token in ihr Geschäftsmodell. Der Token kann Vielfach als Gutschein betrachtet werden und wird benötigt um die Dienstleistung bzw. das Produkt des Unternehmens zu nutzen. Filecoin als erfolgreichster ICO im Jahre 2017 beispielsweise führt den Token Filecoin ein um Speicherplatz zu handeln. Nutzer des dezentralen Speicherdienstes können gegen die Bezahlung von Filecoins Daten im Netzwerk speichern. Die Anbieter von Speicherplatz können im Gegenzug Filecoins verdienen.</p>
</li>
<li>
<p>Security Token: Security Tokens können als eine Form von Unternehmensbeteilgung betrachtet werden. Diese Form von ICO Tokens ist rechtlich bzw. regulatorisch eher problematisch einzustufen. Trotzdem gibt es erfolgreiche ICOs von Security Tokens. So wurde der PAY Token als Security Token ausgegeben und soll zukünftig Eigentümern des Tokens eine Gewinnausschüttung in Ether ermöglichen, welche direkt an den Tokenbesitzer (über den Smart Contract) gehen.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>ICOs werden vorranging auf der Ethereum Blockchain abgewickelt. Die Investionen in den ICO werden demnach vorranging in Ether getätigt. Der ERC-20 Standard hat sich als Token Standard herausgebildet um ICOs abzuwickeln. Es gibt kaum ICOs die nicht als ERC-20 Token ausgegeben werden. Demnach soll in Abschnitt <a href="#section0302">ERC-20 Token Standard</a> der ERC-20 Token Standard im Detail beschrieben werden.</p>
</div>
</div>
<div class="sect2">
<h3 id="section0302">ERC-20 Token Standard</h3>
<div class="paragraph">
<p>Der ERC-20 Token Standard wurde von der Ethereum Community definiert um Token auf der Ethereum Blockchain zu repräsentieren. Ein gemeinsamer und akzeptierter Standard hat viele Vorteile für eine aufstrebende Technologie. Unterschiedliche Anwendungsmöglichkeiten können entstehen und den Standard als Basis nutzen. Einige ausgewählte Beispiele:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ERC-20 Wallets: Wallets welche ERC-20 kompatible Token unterstützen, sind prinzipiell für alle Token, welche den Standard implementieren zugänglich. So können neue Token wie ein Plugin in der Wallet geladen werden. Das aufwändige Programmieren einer eigene Wallet für einen neuen Token würde somit entfallen.</p>
</li>
<li>
<p>ERC-20 Börsen: Kryptowährungen und Tokens werden auf Börsen gehandelt, durch das Zusammentreffen von Angebot und Nachfrage, wird unter anderem der Marktpreis des Tokens ermittelt. Die Aufnahme eines neuen Token, welcher an der Börse gehandelt werden kann, ist technisch einfach realisierbar. Für alle ERC-20 kompatiblen Tokens kann es eine Implementierung geben.</p>
</li>
<li>
<p>ERC-20 Token Explorer: Alle Transaktionen von Kryptowährungen und Token sind generell öffentlich innerhalb der jeweiligen Blockchains einsehbar. Sog. Blockexplorer sind Benutzerfreundliche Web-Anwendungen, welche Blockchains einsehbar machen. Für ERC-20 Token kann ein Explorer entwickelt werden, welcher neue Tokens einfach integrieren kann.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_generische_token_repräsentierung">Generische Token Repräsentierung</h4>
<div class="paragraph">
<p>Tokens werden innerhalb eines Ethereum Smart Contracts abgebildet. Der Token Contract enthält eine einfache Bilanz, welcher die Tokenstände der einzelnen Konten aufführt. Im folgenden wird eine einfach Darstellung dieser Bilanz als Tabelle repräsentiert. Es werden 3 Token Besitzer <code>A</code>, <code>B</code> und <code>C</code> und deren Token Kontostände abgebildet. Zusätlich wird die Gesamtsumme aller Token angezeigt.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Besitzer</th>
<th class="tableblock halign-center valign-top">Token Summe</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Gesamtsumme</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>10.000</strong></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">640</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">50</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Alle Kontobewegungen innerhalb dieses Tokens werden über diese einfache Bilanz abgebildet. Ein Transfer von 40 Token von Besitzer <code>A</code> zu Besitzer <code>B</code> würde zu einer Transformation der Bilanz führen. Das Konto von <code>A</code> würde sich um 40 Token verringern und das Konto von <code>B</code> würde sich um 40 Token erhöhen. Das Ergebnis würde sich wie folgt darstellen:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Besitzer</th>
<th class="tableblock halign-center valign-top">Token Summe</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Gesamtsumme</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>10.000</strong></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">600</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">90</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Intern hat jeder ERC-20 Token eine Datenstruktur, welche die Kontostände in dieser einfach Form abbildet.</p>
</div>
</div>
<div class="sect3">
<h4 id="_allgemeine_erc_20_token_schnittstelle">Allgemeine ERC-20 Token Schnittstelle</h4>
<div class="paragraph">
<p>Der ERC-20 Tokenstandard definiert eine Schnittstelle für Ethereum Smart Contracts. Diese Schnittstellenbeschreibung besteht aus 4 wichtigen Attributen. Diese Attribute sind <code>name</code>, <code>symbol</code>, <code>decimals</code> und <code>totalSupply</code>. <code>name</code>, <code>symbol</code> und <code>decimals</code> sind zwar optional definiert im Standard, es sind jedoch essentielle Attribute für die Darstellung in Applikationen. Im folgenden sollen die Attribute kurz beschrieben werden:
* <em>name</em>: Der Name bzw. die Bezeichnung des Tokens wird als Zeichenkette angegeben. Es ist keine maximale Länge für den Namen definiert, es sollte jedoch in Anbetracht der Darstellung in Benutzerschnittstellen auf die Länge geachtet werden.
* <em>symbol</em>: Jeder Token kann über ein Symbol verfügen, welches als kurze und prägnante Identifikation gilt. Dies ist vergleichbar mit Währungssymbolen. Generell gibt es keine Beschränkung der Symbollänge, gängig sind in jedem Fall 3-stellige Zeichenketten (zB <em>PAY</em> Repräsentiert TenX Tokens). Es ist zu erwähnen, dass es keine zentrale Registrierung für Symbole gibt, sodass durchaus ein Symbol mehrfach in Verwendung sein kann. Bei der Erstellung eines neuen Tokens sollte eine genaue Recherche vorangehen.
* <em>decimals</em>: Die Angabe des Attribut <code>decimals</code> gibt die Teilbarkeit des Tokens an. Ein Token mit dem Wert <em>5</em> für das Attribut bedeuted das ein Token 5 Dezimalstellen hat: <em>1,00000</em>. Ein Kontostand wird immer in der kleinsten Stückelung eines Tokens geführt und als Ganzzahl angegeben (siehe dazu <code>totalSupply</code>).
* <em>totalSupply</em>: Das Attribut <code>totalSupply</code> gibt die Gesamtmenge der Tokens an, welche sich in Umlauf befinden. Die Angabe ist dabei eine Ganzzahl, welche in der kleinste Stückelung der Tokens angegeben ist. Das Attribut <code>totalSupply</code> errechnet sich mit folgender Formel <em>totalSupply = (Anzahl Tokens) * 10^decimals</em>.</p>
</div>
<div class="paragraph">
<p>Neben diese 4 Attributen werden im Token Standard noch Funktionen definiert für den Transfer von Token zwischen unterschiedlichen Konten, bzw. auch zur Abfrage von Kontoständen. Die Funktion zum Transfer von Tokens hat folgende Signatur:</p>
</div>
<div id="solidity0301" class="listingblock">
<div class="title">Listing 3.1</div>
<div class="content">
<pre>function transfer(address _to, uint256 _value) returns (bool success)</pre>
</div>
</div>
<div class="paragraph">
<p>Die Funktion <code>transfer</code> ist verantwortlich für den Eigentumsübergang des angegebenen Tokenbetrags von einem Kontoeigentümer zu einem anderen. Dabei fungiert der Aufrufer der Funktion (<code>msg.sender</code>) als Quelle eines Tokenbetrages (<code>_value</code>), welcher auf dem Konto eines Empfängers (<code>_to</code>) gutgeschrieben wird. Die <code>transfer</code> Funktion gibt als Resultat immer einen boolschen Wert für den Erfolg des Transfers zurück. Es könnte beispielsweise versucht werden, dass der Sender mehr Token transferieren will als sich in seinem Besitz befinden. Dies würde mit einer Rückgabe von <code>false</code> resultieren.</p>
</div>
<div class="paragraph">
<p>Die andere wichtige Funktion <code>balanceOf</code> gibt den Kontostand eines angegebenen Kontos (<code>_owner</code>) zurück. Der Kontostand wird dabei als Ganzahl repräsentiert, welche in der Einheit der kleinste Tokenstückelung angegeben ist. Die Signatur dieser Funktion sieht folgendermaßen aus:</p>
</div>
<div id="solidity0302" class="listingblock">
<div class="title">Listing 3.2</div>
<div class="content">
<pre class="highlight"><code>function balanceOf(address _owner) constant returns (uint256 balance)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Zusammenfassend wird in <a href="#solidity0303">Listing 3.3</a> ein vollständiger Smart Contract gezeigt, welcher die bisher besprochene ERC-20 Token Schnittstelle implementiert. Die Bezeichnung (<code>name</code>) des Tokens lautet <em>Example Token</em> und das Token Symbol (<code>symbol</code>) wird als <em>EXP</em> angegeben. Die Anzahl der gesamten verfügbaren Token wird mit <em>10.000</em> angegeben. Die Anzahl der Dezimalstelle wird auf <em>18</em> fixiert, somit ergeben sich <em>10.000 * 10^18</em> Token in der kleinsten Stückelung. Es wird ebenfalls ein Konstruktor angegeben, welcher die definierte Gesamtmenge der Tokens auf dem Konto des Smart Contract Erstellers gutschreibt.</p>
</div>
<div class="paragraph">
<p>In der Funktion <code>transfer</code> wurden überprüfungen eingeführt, welche einerseits ausschließen das Tokens an die <code>address(0)</code> gesendet werden. Zu dieser Adresse ist kein privater Schlüssel verfügbar und wird somit unbrauchbar. Ein Tokentransfer an die Adresse <code>address(0)</code> kommt einer Zerstörung der jeweiligen Tokens gleich (sog. Burning von Token). Andererseits wird überprüft ob der Sender (<code>msg.sender</code>) überhaupt genügend Token zur Verfügung hat.</p>
</div>
<div id="solidity0303" class="listingblock">
<div class="title">Listing 3.3</div>
<div class="content">
<pre>contract BasicERC20TokenExample {

  string public constant name = "Example Token";
  string public constant symbol = "EXP";
  uint8 public constant decimals = 18;
  uint256 public constant totalSupply = 10000 * (10 ** uint256(decimals));

  mapping(address =&gt; uint256) balances;

  function BasicERC20TokenExample() public {
    balances[msg.sender] = totalSupply;
  }

  function transfer(address _to, uint256 _value) public returns (bool) {
    require(_to != address(0));
    require(_value &lt;= balances[msg.sender]);
    balances[msg.sender] = balances[msg.sender] - _value;
    balances[_to] = balances[_to] + _value;
    Transfer(msg.sender, _to, _value);
    return true;
  }

  function balanceOf(address _owner) public view returns (uint256 balance) {
    return balances[_owner];
  }

}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_weitere_erc_20_token_funktionen">Weitere ERC-20 Token Funktionen</h4>
<div class="paragraph">
<p>Neben den generischen Funktionen zum Transfer von Tokens (<code>transfer</code>) und zur Abfrage der Kontostände (<code>balanceOf</code>) von Token Besitzern, werden von der ERC-20 Token Schnittstelle noch Möglichkeit zur Vergabe von Abbuchungslimits für andere Tokenbsitzer bereitgestellt. So kann beispielsweise Token Besitzer <code>A</code> an Token Besitzer <code>B</code> ein Limit über die Verfügung von 100 seiner Token geben. <code>B</code> kann damit bis zur Ausschöpfung des Limits Transfers von Konto <code>A</code> tätigen. Dafür werden die Funktionen <code>approve</code>, <code>transferFrom</code> und <code>allowance</code> in der Schnittstelle spezifiziert.</p>
</div>
<div id="solidity0304" class="listingblock">
<div class="title">Listing 3.4</div>
<div class="content">
<pre class="highlight"><code>function approve(address _spender, uint256 _value) returns (bool success)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die Funktion <code>approve</code> ermöglicht es einem Kontoinhaber ein Limit für einen anderen Kontoinhaber zu setzen. In <a href="#solidity0304">Listing 3.4</a> wird dem <code>_spender</code> ein Betrag von Tokens (<code>_value</code>) als Limit es Kontoinhabers (<code>msg.sender</code>) gesetzt.</p>
</div>
<div id="solidity0305" class="listingblock">
<div class="title">Listing 3.5</div>
<div class="content">
<pre class="highlight"><code>function transferFrom(address _from, address _to, uint256 _value) returns (bool success)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Das Limit das über die Funktion <code>approve</code> gesetzt wurde, kann über die Funktion <code>transferFrom</code> genutzt werden. Die Signatur der Funktion <code>transferFrom</code> findet sich in <a href="#solidity0305">Listing 3.5</a>. So kann der Kontoinhaber dem ein Limit für ein anderes Konto (<code>_from</code>) gegeben wurde eine Anzahl von Tokens (<code>_value</code>) an einen dritten Kontoinhaber (<code>_to</code>) weitergeben. Die Funktion <code>transferFrom</code> kann für das entsprechende Konto (<code>_from</code>) solange aufgerufen werden bis das gesetzte Limit ausgeschöpft wurde. Jeder Aufruf der Funktion <code>transferFrom</code> minimiert das gesetzte Limit ensprechend um die Anzahl der Tokens (<code>_value</code>).</p>
</div>
<div class="paragraph">
<p>Änhlich der Funktion <code>balanceOf</code> gibt es auch ein Äquivalent <code>allowance</code> zur Abfrage des gesetzten Limits das ein Kontoinhaber (<code>_owner</code>) einem Anderen (<code>_spender</code>) zur Verfügung stellt. In <a href="#solidity0306">Listing 3.6</a> wird die Signatur dieser Funktion dargestellt.</p>
</div>
<div id="solidity0306" class="listingblock">
<div class="title">Listing 3.6</div>
<div class="content">
<pre class="highlight"><code>function allowance(address _owner, address _spender) constant returns (uint256 remaining)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Für den ERC-20 Token sind zusätzlich 2 Ereignisse definiert (<code>Transfer</code> und <code>Approval</code>), welche an entsprechender Stelle erzeugt werden sollten. So wird das <code>Transfer</code> Ereignis innerhalb einer erfolgreichen Ausführung der <code>transfer</code> bzw. <code>transferFrom</code> Funktion ausgeführt. Das <code>Approval</code> Ereignis innerhalb einer erfolgreichen Ausführung der <code>approve</code> Funktion. Anschließend an <a href="#solidity0303">Listing 3.3</a> soll nun in <a href="#solidity0307">Listing 3.7</a> eine vollständige ERC-20 Token Implementierung angeführt sein.</p>
</div>
<div id="solidity0307" class="listingblock">
<div class="title">Listing 3.7</div>
<div class="content">
<pre>contract FullERC20TokenExample is BasicERC20TokenExample {

  mapping (address =&gt; mapping (address =&gt; uint256)) internal allowed;

  function transferFrom(address _from, address _to, uint256 _value) public returns (bool) {
    require(_to != address(0));
    require(_value &lt;= balances[_from]);
    require(_value &lt;= allowed[_from][msg.sender]);

    balances[_from] = balances[_from] - _value;
    balances[_to] = balances[_to] + _value;
    allowed[_from][msg.sender] = allowed[_from][msg.sender] - _value;
    Transfer(_from, _to, _value);
    return true;
  }

  function approve(address _spender, uint256 _value) public returns (bool) {
    allowed[msg.sender][_spender] = _value;
    Approval(msg.sender, _spender, _value);
    return true;
  }

  function allowance(address _owner, address _spender) public view returns (uint256) {
    return allowed[_owner][_spender];
  }

}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section0303">Crowdsale Contracts</h3>
<div class="paragraph">
<p>Neben dem ERC-20 Token Contract, welcher den Token repräsentiert der durch einen ICO ausgegeben wird, wird die Ausgabe selbst über einen Smart Contract getätigt. Crowdsale Contracts können dabei unterschiedlichste Formen annehmen und bieten dem Unternehmen das den ICO durchführt sehr viele Gestaltungsmöglichkeiten.</p>
</div>
<div class="paragraph">
<p>Im folgenden sollen gängige Parameter eines Crowdsale Contracts besprochen werden:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Pre-ICO Phasen</em>: Um den Verkauf von Token attraktiver zu machen, kann als Instrument ein Pre-ICO stattfinden. Vor dem Start des tatsächlichen ICO, können Tokens zu verringerten Preisen angeboten werden. Als Regel für den Smart Contract könnte ein Zeitraum definiert werden, welcher mit einer maximalen Anzahl von Pre-ICO Token angeboten wird. Beispiel: Eine Woche vor dem ICO Start werden 100.000 Token mit einem 10% Rabatt ausgegeben.</p>
</li>
<li>
<p><em>Investitionsschwelle</em>: Im ICO Contract kann eine Mindestinvestmentschwelle definiert werden. Dies würde bedeuten, dass bei einer Unterfinanzierung die Investoren ihr Investment wieder rückfordern können. Der Smart Contract würde dafür eine eigene Methode bereitstellen. Beispiel: Ein ICO wird mit einer mind. Investionsschwelle von 20.000 Token definiert. Werden nun bis Ende des ICO nur 19.000 Token verkauft, könnnen die Investoren ihr Investment über den Smart Contract wieder rückfordern. Der Ersteller des ICO Contracts hat keine Möglichkeit vor Überschreiten der Investmentschwelle auf die Investitionen zuzugreifen.</p>
</li>
<li>
<p><em>Airdrops</em>: Dies eine spezielle Form um die Attraktivität des ICO zu steigern. So kann nach einem gewissen Auswahlschema an Konten vor ICO Start Tokens verschenkt werden. Dies kann dann auch an eine Regel geknüpft sein, dass diese Token nur abgerufen werden können, wenn ein bestimmtes Investment gemacht wird. Beispiel: Für einen neuen ICO werden allen Investoren eines komplementären vorhergehenden ICO 10 Token gutgeschrieben.</p>
</li>
<li>
<p><em>Spezielle Insentives</em>: Es könnten Regeln im ICO definiert sein die nach unterschiedlichen Gegebenheiten Tokens an Investoren verschenken. Beispiel: Jeder zehnte Invetor bekommt einen Token geschenkt.</p>
</li>
<li>
<p><em>Bounties</em>: Für die Unterstützung während des ICO können Token verschenkt werden. Dies kann zB bei der Übersetzung des ICO Whitepapers in unterschiedliche Sprachen passieren oder für spezielle Promitionen in Social Media Netzwerken. Beispiel: Für die Übersetzung des Whitepapers in die Sprache Deutsch werden 100 Token vergeben.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="section0304">Implementierung des Demo ICO</h3>
<div class="paragraph">
<p>Zur technischen Realisierung eines ICO werden einerseits die entsprechenden Smart Contracts (Token, Crowdsale) und andererseits eine ICO Web Anwendung benötigt. In <a href="#section0305">Crowdsale Smart Contract</a> wird der implementierte Crowdsale Contract besprochen und in <a href="#section0306">ICO Web-Anwendung</a> wird auf die implementierte ICO Web Anwendung eingegangen.</p>
</div>
<div class="sect3">
<h4 id="section0305">Crowdsale Smart Contract</h4>
<div class="paragraph">
<p>Im folgenden soll ein sehr einfacher Crowdsale Smart Contract besprochen werden. Die Implementierung findet sich in <a href="#solidity0308">Listing 3.8</a> aufgeführt.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Der <code>ExampleCrowdsale</code> Contract enthält einen leicht modifizierten <code>ExampleToken</code> aus <a href="#solidity0306">Listing 3.6</a> und <a href="#solidity0307">Listing 3.7</a> als Attribut. Innerhalb des Konstruktors wird eine Instanz des <code>ExampleToken</code> erstellt und dem Attribut zugewiesen. Dies führt zur Erstellung eines eigenen Smart Contracts mit eigener Adresse, welcher den ERC-20 Token repräsentiert.</p>
</li>
<li>
<p>Dem Konstrukor wird eine Rate (<code>_rate</code>) übergeben. Diese Rate bestimmt sozusagen den Wechselkurs zwischen Ether und dem auszuschüttenden ERC-20 Token.</p>
</li>
<li>
<p>Dem Konstruktor wird ebenfalls eine maximale Investionshöhe (<code>_cap</code>) übergeben. Dies bestimmt die maximale Menge an Tokens, welche ausgeschüttet werden können über den Crowdsale. Falls die investierten Weis (kleinste Einheit von Ethereum) das Maximum erreichen, können keine weiteren Tokens mehr generiert werden.</p>
</li>
<li>
<p>Es gibt eine default Funktion (anonyme Funktion), welche standardmäßig bei Transaktionen an den Crowdsale Contract ausgeführt wird. Diese default Funktion ist sehr wichtig, da somit alle gängigen Ethereum Wallets unterstützt werden können. Nur wenige Wallets können zusätzliche Parameter, wie zB den aufzurufenden Funktionsnamen, übergeben.</p>
</li>
<li>
<p>Die wichtige Funktion <code>buyTokens</code> generiert für den übergebenen Kontoinhaber (<code>beneficiary</code>) neue Tokens. Als wichtige Vorarbeit wird vorerst überprüft, ob es sich um eine valide Transaktion handelt und überhaupt neue Tokens generiert werden können. Dazu wird überprüft, ob das Maximum (<code>cap</code>) noch nicht überschritten wurde und ob überhaupt eine Investion vorliegt (<code>wei &gt; 0</code>). Ebenfalls wird geprüft ob es sich nicht um die <code>address(0)</code> handelt, welche die Transaktion initiert hat. Dies würde nämlich zu einem sog. Token burning führen. Falls die Überprüfung positiv verläuft, werden anhand der Rate die Anzahl der neuen Tokens berechnet und im Token Contract erzeugt. Dazu wird die Funktion <code>mint</code> verwendet, welche in <a href="#solidity0309">Listing 3.9</a> aufgeführt ist.</p>
</li>
<li>
<p>Die Funktion <code>mint</code> aus <a href="#solidity0309">Listing 3.9</a> zeigt auf, dass der Erzeuger bzw. Owner (<code>onlyOwner</code>) die Befähigung hat neue Tokens zu schöpfen. Im Beispiel würde der Erzeuger des <code>ExampleToken</code> der Crowdsale Contract sein und somit die einzige Instanz, welche neue Tokens schöpfen könnte.</p>
</li>
</ul>
</div>
<div id="solidity0308" class="listingblock">
<div class="title">Listing 3.8</div>
<div class="content">
<pre>contract ExampleCrowdsale {

  ExampleToken public token;
  address public wallet;
  uint256 public cap;
  uint256 public rate;
  uint256 public weiRaised;

  function ExampleCrowdsale(uint256 _rate, uint256 _cap) public {
    require(_rate &gt; 0 &amp;&amp; _cap &gt; 0);

    token = new ExampleToken();
    rate = _rate;
    cap = _cap;
    wallet = msg.sender;
  }

  function () external payable {
    buyTokens(msg.sender);
  }

  function buyTokens(address beneficiary) public payable {
    require(beneficiary != address(0));
    require(validPurchase());

    uint256 weiAmount = msg.value;
    uint256 tokens = weiAmount * rate;
    weiRaised = weiRaised + weiAmount;

    token.mint(beneficiary, tokens);
  }

  function withdrawFunds() internal {
    wallet.transfer(this.balance);
  }

  function validPurchase() internal view returns (bool) {
    bool nonZeroPurchase = msg.value != 0;
    bool withinCap = (weiRaised + msg.value) &lt;= cap;

    return nonZeroPurchase &amp;&amp; withinCap;
  }

}</pre>
</div>
</div>
<div id="solidity0309" class="listingblock">
<div class="title">Listing 3.9</div>
<div class="content">
<pre>contract MintableToken extends BasicERC20TokenExample {

  function mint(address _to, uint256 _amount) onlyOwner public returns (bool) {
    totalSupply = totalSupply + _amount;
    balances[_to] = balances[_to] + _amount;
    return true;
  }

}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="section0306">ICO Web-Anwendung</h4>
<div class="paragraph">
<p>Die zugehörige Web Anwendung zu einem ICO verfolgt primär die Aufgabe einer Investorin den ICO zu vermarkten. So kommt es vorrangig auf eine entsprechende Gestaltung an. Einige gängige Funktionen, welche jede ICO Web Anwendung haben soll, wurden im Beispiel implementiert und im Folgenden erläutert.</p>
</div>
<div class="paragraph">
<p>In <a href="#ico1-image">ICO Web Anwendung</a> findet sich ein Screenshot der implementierten Web Anwendung. Folgende Aspekte finden sich in der Web Anwendung:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Die Addresse des Smart Contracts, welcher Investments entgegen nimmt, wird klar ersichtlich. Die Investorin würde diese Addresse in ihrer Wallet öffnen und würde somit die Zieladresse der zu tätigenden Transaktion besitzen.</p>
</li>
<li>
<p>Der Wechselkurs zu dem die Investorin Tokens gegen Ether tauschen kann.</p>
</li>
<li>
<p>Es gibt die Möglichkeit eine Suche mittels der Addresse der Kontoinhaberin zu tätigen, um den ensprechenden Tokenstand abzufragen.</p>
</li>
<li>
<p>In <a href="#ico2-image">ICO Kontostand Abfrage</a> wird das Ergebnis der Tokenstandabfrage angezeigt.</p>
</li>
</ul>
</div>
<div id="ico1-image" class="imageblock">
<div class="content">
<img src="images/ICO_1.png" alt="ICO Web Anwendung">
</div>
<div class="title">Figure 12. ICO Web Anwendung</div>
</div>
<div id="ico2-image" class="imageblock">
<div class="content">
<img src="images/ICO_2.png" alt="ICO Kontostand Abfrage">
</div>
<div class="title">Figure 13. ICO Kontostand Abfrage</div>
</div>
<div class="paragraph">
<p>Ein wichtiger Aspekt zur Implementierung der Web Anwendung besteht darin mit dem Ethereum Peer-to-Peer Netzwerk zu kommunizieren. Eine Web Anwendung wird in einer sog. Browser Sandbox ausgeführt und kann aus Sicherheitsgründen keine Kommunikation direkt über TCP Sockets durchführen. Das Ethereum Peer-to-Peer Netzwerk verfügt über ein eigenes Protokoll, welches direkt auf der TCP Netzwerkschicht aufsetzt. Innerhalb der Browser Sandbox kann jedoch nur das HTTP-Protokoll genutzt werden.</p>
</div>
<div class="paragraph">
<p>Die ICO Web Anwendung benötigt für entsprechende Funktionen jedoch die Möglichkeit mit den Smart Contracts zu kommunizieren. Es müssen zB die Tokenstandsabfragen durchgeführt werden. In der Implementierung wurde der externe Dienst [<a href="https://infura.io" class="bare">https://infura.io</a>](infura.io) genutzt, welcher einen kostenlosen HTTP Proxy für das Ethereum Netzwerk bereitstellt.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section0307">Diskussion</h3>
<div class="paragraph">
<p>In der Demonstration wird ein vollständiger ICO Smart Contract inklusive zugehöriger Web-Anwendung entwickelt. Diese Demonstration könnte grundsätzlich für einen richtigen ICO verwendet werden. Da bei einem richtigen ICO eine hohe Investmentsumme im Spiel sein kann, sollten einige Aspekte umbedingt beachtet werden:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Es gibt Dienstleitungsunternehmen, welche Smart Contracts auditieren. Ein Audit von einer Partei, welche nicht Teil des Teams ist, sollte umbedingt angestrebt werden. Es sollte ein Auditor gewählt werden, welcher bereits Smart Contracts auditiert hat und diese Audits als Referenz vorweisen kann.</p>
</li>
<li>
<p>Für ICO Smart Contracts gibt es bereits vorgefertigte und auditierte Bibliotheken, welche genutzt werden können. Als Beispiel soll auf die Bibliothek [<a href="https://openzeppelin.org" class="bare">https://openzeppelin.org</a>](OpenZepplin) verwiesen werden, welche bereits vielfältig in ICOs zum Einsatz kam. Natürlich kann es unterschiedliche spezielle Funktionen eines ICO Smart Contracts geben, welche nicht als Teil einer Standardbibliothek ausgeliefert werden können. Ein Audit könnte sich nun nur auf diese Funktionen fokusieren.</p>
</li>
<li>
<p>Es gab unterschiedliedlichste Fälle von Hackerangriffen im Zusammenhang mit ICOs. Als triviales Beispiel eines Hacks kann der CoinDash ICO betrachtet werden. Einem Hacker gelang es, die veröffentlichte Ethereum Adresse auf der ICO Website abzuändern, sodass alle Investments direkt an den Hacker anstelle des Starups gingen. Dies könnte mittels eines sicheren Zungangs auf den Web-Server verhindert werden. Alle klassichen Regeln der IT-Sicherheit sollen bei ICO umbedingt eingehalten werden.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ethereum_entwicklungsumgebung">Anhang A: Ethereum Entwicklungsumgebung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ethereum_client">Ethereum Client</h3>
<div class="paragraph">
<p>Um sich als Teil des Ethereum Peer-to-Peer Netzwerk zu setzen, muss man einen Ethereum Client betreiben. Ein Ethereum Client würde sich über das Internet mit anderen Knoten synchronisieren und somit den aktuellen Status der Blockchain vorhalten. Für das Initiale Synchronisieren der Blockchain muss ein längerer Zeitraum eingeplant werden, da die gesamte Vergangenheit aller Transaktionen aus dem Netzwerk abgefragt und validiert werden müssen. Ethereum Clients sind meist Dienstprogramme ohne Benutzeroberfläche, welche über die Kommandozeile gesteuert werden. Es gibt verschiedene Implementierungen von Ethereum:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>geth: Ist eine Implementierung in Go, welche im Mainnet mit Abstand der populärste Client ist. Geth wird von der Ethereum Foundation entwickelt.</p>
</li>
<li>
<p>parity: Neben geth ist parity ein weiterer sehr populärer Client, welcher von der Parity Foundation entwickelt wird.</p>
</li>
<li>
<p>Es gibt noch einige weitere Implementierungen in C++, Java, Python etc, welche jedoch keine großen Anteil im Mainnet ausmachen.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Neben dem Mainnet von Ethereum, welches den eigentlichen Wert von Ethereum ausmacht, gibt es noch unterschiedliche Varianten von Ethereum Netzwerken für Testzwecke:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ropsten Testnet: Das Ropsten Test-Netzwerk ist ein Proof-of-Work Testnet. Dieses Testnet kann relativ langsam sein, da es nicht vor SPAM Attacken geschützt ist. Ropsten bildet das aktuelle Mainnet jedoch am besten nach.</p>
</li>
<li>
<p>Kovan Testnet: Das Kovan Test-Netzwerk wird von der parity-Community betrieben und unterliegt einem Proof-of-Authority, sodass SPAM Attacken abgewendet werden können.</p>
</li>
<li>
<p>Rinkeby Testnet: Das Rinkeby Test-Netzwerk wird von der geth-Community betrieben und unterliegt einem Proof-of-Authority, sodass SPAM Attacken abgewendet werden können.</p>
</li>
<li>
<p>Privates Testnet: Es kann auch ein privates Ethereum Netzwerk betrieben werden. Zum Zweck des reinen Testens wäre aber Ganache (siehe unten) vorteilhafter.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ethereum_dapp_browser">Ethereum DApp Browser</h3>
<div class="paragraph">
<p>Um DApps nutzen zu können wird ein Browser benötigt, welcher mit dem Ethereum Netzwerk verbunden ist bzw. eine Wallet bereitstellt, sodass Transaktionen signiert werden können. Über eine URI kann eine DApp geöffnet werden und über den DApp Browser genutzt werden. Für Ethereum gibt es unterschiedliche Browser, folgend eine Übersicht:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mist: Der Mist Browser enthält eine Wallet, einen integrierten Web-Browser und eine Verknüpfung zu geth.</p>
</li>
<li>
<p>Parity: Auch Parity hat einen DApp Browser und eine Wallet integriert.</p>
</li>
<li>
<p>Mobile DApp Browser: Es gibt unterschiedliche leichtgewichtige mobilen DApp Browser (zB Status, Toshi), welche keine Ethereum Client voraussetzen, sondern das Netzwerk über einen Proxy anbinden. Aktuell sind alle mobilen DApp Browser Beta Versionen.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_truffle">Truffle</h3>
<div class="paragraph">
<p>[Truffle](<a href="http://truffleframework.com" class="bare">http://truffleframework.com</a>) ist ein Kommandozeilenprogramm,  welches die Entwicklung von Smart Contract Projekten mit Solidity stark vereinfacht. Im Wesentlichen stellt Truffle folgende Funktionen bereit:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kompilieren von Smart Contract Quellcode in ausführbaren Bytecode.</p>
</li>
<li>
<p>Deployment von Bytecode in das Ethereum Mainnet, Testnet bzw. privates Testnet.</p>
</li>
<li>
<p>Unit Testing von Smart Contracts über das Mocha (javascript) Test Framework.</p>
</li>
<li>
<p>Debugging einer "historischen" Smart Contract Ausführung. Da alle Smart Contract Ausführungen in der Blockchain gespeichert sind, können diese mittels eines Debuggers Schritt für Schritt nachvollzogen werden.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Truffle ist eine node.js Anwendung und kann über den <code>node package manager</code> installiert werden. Dazu muss folgender Befehl ausgeführt werden:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ npm install -g truffle</pre>
</div>
</div>
<div class="paragraph">
<p>Dies ermöglicht es <code>truffle</code> als Befehl über die Kommandozeile zu nutzen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_metamask">MetaMask</h3>
<div class="paragraph">
<p>Ein Web-Browser kann generisch nicht zur Interaktion mit DApps genutzt werden, da eine Verbindung zum Ethereum Netzwerk fehlt bzw. eine Wallet benötigt wird um Transaktionen zu signieren. MetaMask ist eine Browser Extension, welche eine Wallet und eine Verbindung mit dem Ethereum Netzwerk über einen Proxy herstellen kann. MetaMask kann innerhalb von Chrome, Firefox, Opera und Brave genutzt werden. Die Extension kann über die entsprechenden Add-on Stores der Browserhersteller installiert werden. Die Sicherheit der intregrierten Wallet ist jedoch nicht zu vergleichen mit einer reinen Hardware Wallet, sodass nur wenig Ether darauf gehalten werden sollte. MetaMask eignet sich jedoch sehr gut um DApps zu testen, da man ein privates Netzwerk bzw. alle Testnetzwerke anbinden kann.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ganache">Ganache</h3>
<div class="paragraph">
<p>Ganache ist eine sehr leichtgewichtige private Ethereum Testumgebung. Ganache bietet einen Kommandozeilenprogramm <code>ganache-cli</code> bzw. auch eine Benutzerschnittstelle. Die Bereitstellung eines eigenen Ethereum Client (zB geth oder parity) für Testzwecke kann mitunter aufwendig sein. Ganache bietet hierbei eine starke Vereinfachung und funktioniert ebenfalls für Continous Integration Umgebungen. Um als Entwickler möglichst schnell Smart Contracts in den Testbetrieb zu bekommen, gibt es keine einfachere und schnellere Variante als Ganache.</p>
</div>
<div class="paragraph">
<p><code>ganache-cli</code> ist eine node.js Anwendung und kann über den <code>node package manager</code> installiert werden. Dazu muss folgender Befehl ausgeführt werden:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ npm install -g ganache-cli</pre>
</div>
</div>
<div class="paragraph">
<p>Dies ermöglicht es <code>ganache-cli</code> als Befehl über die Kommandozeile zu nutzen. Die Benutzeroberfläche, welche einen grafischen Überblick über die private Blockchain verschafft, kann über die [Ganache Website](<a href="http://truffleframework.com/ganache/" class="bare">http://truffleframework.com/ganache/</a>) für alle Betriebssysteme heruntergeladen werden.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_referenzen">Referenzen</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="Bit2008"></a>[Bit2008] Bitcoin: A Peer-to-Peer Electronic Cash System, Satoshi Nakamoto; Link: <a href="http://bitcoin.com/bitcoin.pdf" class="bare">http://bitcoin.com/bitcoin.pdf</a></p>
</li>
<li>
<p><a id="Swa2015"></a>[Swa2015] Melanie Swan. Blockchain</p>
</li>
<li>
<p><a id="Eth2017"></a>[Eth2017] Design Rationale, Ethereum; Link: <a href="https://github.com/ethereum/wiki/wiki/Design-Rationale" class="bare">https://github.com/ethereum/wiki/wiki/Design-Rationale</a></p>
</li>
<li>
<p><a id="Mai2008"></a>[Mai2008] Mail Archive Cypherpunk Mailingliste; Link: <a href="http://www.mail-archive.com/cryptography@metzdowd.com/msg09959.html" class="bare">http://www.mail-archive.com/cryptography@metzdowd.com/msg09959.html</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. Augur: <a href="https://augur.net" class="bare">https://augur.net</a>
</div>
<div class="footnote" id="_footnote_2">
<a href="#_footnoteref_2">2</a>. Gnosis: <a href="https://gnosis.pm/" class="bare">https://gnosis.pm/</a>
</div>
<div class="footnote" id="_footnote_3">
<a href="#_footnoteref_3">3</a>. Stox: <a href="https://www.stox.com" class="bare">https://www.stox.com</a>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0.0<br>
Last updated 2018-06-21 11:48:03 CEST
</div>
</div>
</body>
</html>